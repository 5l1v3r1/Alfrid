!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("alfrid",[],e):"object"==typeof exports?exports.alfrid=e():t.alfrid=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(78)},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=r(109),i=n(a);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=r(105),h=n(f),c=r(104),d=n(c),_=r(106),v=n(_),p=r(107),M=n(p),m=r(59),x=(n(m),r(99)),E=n(x),T=void 0,g=function(){function t(){(0,i.default)(this,t),this.canvas,this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=l.default.mat4.create(),this._normalMatrix=l.default.mat3.create(),this._inverseModelViewMatrix=l.default.mat3.create(),this._modelMatrix=l.default.mat4.create(),this._matrix=l.default.mat4.create(),this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance,this._extArrayInstance,this._hasCheckedExt=!1,l.default.mat4.identity(this.identityMatrix,this.identityMatrix),this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}return(0,o.default)(t,[{key:"init",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(null===t||void 0===t)return void console.error("Canvas not exist");void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight);var r=void 0;e.ignoreWebgl2?r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e):(r=this.canvas.getContext("experimental-webgl2",e)||this.canvas.getContext("webgl2",e),r?this._useWebGL2=!0:r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e)),console.log("Using WebGL 2 ?",this.webgl2),this.initWithGL(r)}},{key:"initWithGL",value:function(t){this.canvas||(this.canvas=t.canvas),T=this.gl=t,this.extensions={};for(var e=0;e<E.default.length;e++)this.extensions[E.default[e]]=T.getExtension(E.default[e]);(0,d.default)(),(0,h.default)(T,"OES_vertex_array_object"),(0,h.default)(T,"ANGLE_instanced_arrays"),(0,h.default)(T,"WEBGL_draw_buffers"),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.enable(this.BLEND),this.enableAlphaBlending()}},{key:"setViewport",value:function(t,e,r,n){var a=!1;t!==this._viewport[0]&&(a=!0),e!==this._viewport[1]&&(a=!0),r!==this._viewport[2]&&(a=!0),n!==this._viewport[3]&&(a=!0),a&&(T.viewport(t,e,r,n),this._viewport=[t,e,r,n])}},{key:"scissor",value:function(t,e,r,n){T.scissor(t,e,r,n)}},{key:"clear",value:function(t,e,r,n){T.clearColor(t,e,r,n),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT)}},{key:"setMatrices",value:function(t){this.camera=t,this.rotate(this.identityMatrix)}},{key:"useShader",value:function(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram}},{key:"rotate",value:function(t){l.default.mat4.copy(this._modelMatrix,t),l.default.mat4.multiply(this._matrix,this.camera.matrix,this._modelMatrix),l.default.mat3.fromMat4(this._normalMatrix,this._matrix),l.default.mat3.invert(this._normalMatrix,this._normalMatrix),l.default.mat3.transpose(this._normalMatrix,this._normalMatrix),l.default.mat3.fromMat4(this._inverseModelViewMatrix,this._matrix),l.default.mat3.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix)}},{key:"draw",value:function(t,e){if(t.length)for(var r=0;r<t.length;r++)this.draw(t[r]);else{t.bind(this.shaderProgram),void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projection),this.shader.uniform("uViewMatrix","mat4",this.camera.matrix)),this.shader.uniform("uModelMatrix","mat4",this._modelMatrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix);var n=t.drawType;void 0!==e&&(n=e),t.isInstanced?T.drawElementsInstanced(t.drawType,t.iBuffer.numItems,T.UNSIGNED_SHORT,0,t.numInstance):n===T.POINTS?T.drawArrays(n,0,t.vertexSize):T.drawElements(n,t.iBuffer.numItems,T.UNSIGNED_SHORT,0),t.unbind()}}},{key:"drawTransformFeedback",value:function(t){var e=t.meshSource,r=t.meshDestination,n=t.numPoints,a=t.transformFeedback;e.bind(this.shaderProgram),r.generateBuffers(this.shaderProgram),T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,a),r.attributes.forEach(function(t,e){T.bindBufferBase(T.TRANSFORM_FEEDBACK_BUFFER,e,t.buffer)}),T.enable(T.RASTERIZER_DISCARD),T.beginTransformFeedback(T.POINTS),T.drawArrays(T.POINTS,0,n),T.endTransformFeedback(),T.disable(T.RASTERIZER_DISCARD),T.useProgram(null),T.bindBuffer(T.ARRAY_BUFFER,null),r.attributes.forEach(function(t,e){T.bindBufferBase(T.TRANSFORM_FEEDBACK_BUFFER,e,null)}),T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,null),e.unbind()}},{key:"setSize",value:function(t,e){this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,T&&this.viewport(0,0,this._width,this._height)}},{key:"showExtensions",value:function(){console.log("Extensions : ",this.extensions);for(var t in this.extensions)this.extensions[t]&&console.log(t,":",this.extensions[t])}},{key:"checkExtension",value:function(t){return!!this.extensions[t]}},{key:"getExtension",value:function(t){return this.extensions[t]}},{key:"enableAlphaBlending",value:function(){T.blendFunc(T.SRC_ALPHA,T.ONE_MINUS_SRC_ALPHA)}},{key:"enableAdditiveBlending",value:function(){T.blendFunc(T.ONE,T.ONE)}},{key:"enable",value:function(t){T.enable(t)}},{key:"disable",value:function(t){T.disable(t)}},{key:"viewport",value:function(t,e,r,n){this.setViewport(t,e,r,n)}},{key:"destroy",value:function(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){console.log("Error : ",t)}this.canvas=null}},{key:"FLOAT",get:function(){return(0,v.default)()}},{key:"HALF_FLOAT",get:function(){return(0,M.default)()}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"aspectRatio",get:function(){return this._aspectRatio}},{key:"webgl2",get:function(){return this._useWebGL2}}]),t}(),b=new g;e.default=b,t.exports=e.default},function(t,e,r){t.exports={"default":r(117),__esModule:!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=r(111),i=n(a),u=r(108),o=n(u),s=r(36),l=n(s);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,l.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=r(36),i=n(a);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(36),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(3),h=n(f),c=(r(155),function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}),d=function(t){for(var e=t.split("\n"),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")},_=function(t){return t.slice?t.slice(0):new Float32Array(t)},v=void 0,p=r(51),M=r(159),m={"float":"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv","int":"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},x=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?p:arguments[0],r=arguments.length<=1||void 0===arguments[1]?M:arguments[1],n=arguments[2];(0,o.default)(this,t),v=h.default.gl,this.parameters=[],this.uniformTextures=[],this._varyings=n,e||(e=p),r||(r=p);var a=this._createShaderProgram(e,!0),i=this._createShaderProgram(r,!1);this._attachShaderProgram(a,i)}return(0,l.default)(t,[{key:"bind",value:function(){h.default.shader!==this&&(v.useProgram(this.shaderProgram),h.default.useShader(this),this.uniformTextures=[])}},{key:"uniform",value:function(t,e,r){if("object"===("undefined"==typeof t?"undefined":(0,i.default)(t)))return void this.uniformObject(t);for(var n=m[e]||e,a=!1,u=void 0,o=-1,s=0;s<this.parameters.length;s++)if(u=this.parameters[s],u.name===t){a=!0,o=s;break}var l=!1;if(a?(this.shaderProgram[t]=u.uniformLoc,l=u.isNumber):(l="uniform1i"===n||"uniform1f"===n,this.shaderProgram[t]=v.getUniformLocation(this.shaderProgram,t),l?this.parameters.push({name:t,type:n,value:r,uniformLoc:this.shaderProgram[t],isNumber:l}):this.parameters.push({name:t,type:n,value:_(r),uniformLoc:this.shaderProgram[t],isNumber:l}),o=this.parameters.length-1),this.parameters[o].uniformLoc)if(-1===n.indexOf("Matrix"))if(l){var f=this.parameters[o].value!==r||!a;f&&(v[n](this.shaderProgram[t],r),this.parameters[o].value=r)}else c(this.parameters[o].value,r)&&a||(v[n](this.shaderProgram[t],r),this.parameters[o].value=_(r));else c(this.parameters[o].value,r)&&a||(v[n](this.shaderProgram[t],!1,r),this.parameters[o].value=_(r))}},{key:"uniformObject",value:function(e){for(var r in e){var n=e[r],a=t.getUniformType(n);if(n.concat&&n[0].concat){for(var i=[],u=0;u<n.length;u++)i=i.concat(n[u]);n=i}this.uniform(r,a,n)}}},{key:"_createShaderProgram",value:function(t,e){var r=e?h.default.VERTEX_SHADER:h.default.FRAGMENT_SHADER,n=v.createShader(r);return v.shaderSource(n,t),v.compileShader(n),v.getShaderParameter(n,v.COMPILE_STATUS)?n:(console.warn("Error in Shader : ",v.getShaderInfoLog(n)),console.log(d(t)),null)}},{key:"_attachShaderProgram",value:function(t,e){this.shaderProgram=v.createProgram(),v.attachShader(this.shaderProgram,t),v.attachShader(this.shaderProgram,e),v.deleteShader(t),v.deleteShader(e),this._varyings&&(console.log("Transform feedback setup : ",this._varyings),v.transformFeedbackVaryings(this.shaderProgram,this._varyings,v.SEPARATE_ATTRIBS)),v.linkProgram(this.shaderProgram)}}]),t}();x.getUniformType=function(t){var e=!!t.concat,r=function(t){return 9===t.length?"uniformMatrix3fv":16===t.length?"uniformMatrix4fv":"vec"+t.length};return e?r(t[0].concat?t[0]:t):"float"},e.default=x,t.exports=e.default},function(t,e,r){e.glMatrix=r(11),e.mat2=r(150),e.mat2d=r(151),e.mat3=r(72),e.mat4=r(152),e.quat=r(153),e.vec2=r(154),e.vec3=r(73),e.vec4=r(74)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=function(){function t(e,r){(0,i.default)(this,t),this._mesh=e,this._shader=r}return(0,o.default)(t,[{key:"draw",value:function(){this._shader.bind(),l.default.draw(this.mesh)}},{key:"mesh",get:function(){return this._mesh}},{key:"shader",get:function(){return this._shader}}]),t}();e.default=f,t.exports=e.default},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=r(4),i=n(a),u=r(110),o=n(u);e.default=function s(t,e,r){null===t&&(t=Function.prototype);var n=(0,o.default)(t,e);if(void 0===n){var a=(0,i.default)(t);return null===a?void 0:s(a,e,r)}if("value"in n)return n.value;var u=n.get;if(void 0!==u)return u.call(r)}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(126),a=r(37);t.exports=function(t){return n(a(t))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(8),h=r(59),c=n(h),d=void 0,_=35044,v=function(t){var e=void 0;return void 0!==t.buffer?e=t.buffer:(e=d.createBuffer(),t.buffer=e),e},p=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?4:arguments[0],r=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];(0,i.default)(this,t),d=l.default.gl,this.drawType=e,this._attributes=[],this._numInstance=-1,this._enabledVertexAttribute=[],this._indices=[],this._faces=[],this._bufferChanged=[],this._hasIndexBufferChanged=!1,this._hasVAO=!1,this._isInstanced=!1,this._extVAO=!!l.default.gl.createVertexArray,this._useVAO=!!this._extVAO&&r}return(0,o.default)(t,[{key:"bufferVertex",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?_:arguments[1];this.bufferData(t,"aVertexPosition",3,e),this.normals.length<this.vertices.length&&this.bufferNormal(t,e)}},{key:"bufferTexCoord",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?_:arguments[1];this.bufferData(t,"aTextureCoord",2,e)}},{key:"bufferNormal",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?_:arguments[1];this.bufferData(t,"aNormal",3,e)}},{key:"bufferIndex",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this._drawType=e?d.DYNAMIC_DRAW:d.STATIC_DRAW,this._indices=new Uint16Array(t),this._numItems=this._indices.length}},{key:"bufferData",value:function e(t,r,n){var a=arguments.length<=3||void 0===arguments[3]?_:arguments[3],i=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],u=0,o=a,e=[];for(n||(n=t[0].length),this._isInstanced=i||this._isInstanced,u=0;u<t.length;u++)for(var s=0;s<t[u].length;s++)e.push(t[u][s]);var l=new Float32Array(e),f=this.getAttribute(r);f?(f.itemSize=n,f.dataArray=l,f.source=t):this._attributes.push({name:r,source:t,itemSize:n,drawType:o,dataArray:l,isInstanced:i}),this._bufferChanged.push(r)}},{key:"bufferInstance",value:function(t,e){if(!l.default.gl.vertexAttribDivisor)return void console.error("Extension : ANGLE_instanced_arrays is not supported with this device !");var r=t[0].length;this._numInstance=t.length,this.bufferData(t,e,r,_,!0)}},{key:"bind",value:function(t){this.generateBuffers(t),this.hasVAO?d.bindVertexArray(this.vao):(this.attributes.forEach(function(t){d.bindBuffer(d.ARRAY_BUFFER,t.buffer);var e=t.attrPosition;d.vertexAttribPointer(e,t.itemSize,d.FLOAT,!1,0,0),t.isInstanced&&d.vertexAttribDivisor(e,1)}),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.iBuffer))}},{key:"generateBuffers",value:function(t){var e=this;0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=d.createVertexArray()),d.bindVertexArray(this._vao),this._attributes.forEach(function(r){if(-1!==e._bufferChanged.indexOf(r.name)){var n=v(r);d.bindBuffer(d.ARRAY_BUFFER,n),d.bufferData(d.ARRAY_BUFFER,r.dataArray,r.drawType);var a=(0,c.default)(d,t,r.name);d.enableVertexAttribArray(a),d.vertexAttribPointer(a,r.itemSize,d.FLOAT,!1,0,0),r.attrPosition=a,r.isInstanced&&d.vertexAttribDivisor(a,1)}}),this._updateIndexBuffer(),d.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(function(r){if(-1!==e._bufferChanged.indexOf(r.name)){var n=v(r);d.bindBuffer(d.ARRAY_BUFFER,n),d.bufferData(d.ARRAY_BUFFER,r.dataArray,r.drawType);var a=(0,c.default)(d,t,r.name);d.enableVertexAttribArray(a),d.vertexAttribPointer(a,r.itemSize,d.FLOAT,!1,0,0),r.attrPosition=a,r.isInstanced&&d.vertexAttribDivisor(a,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}},{key:"unbind",value:function(){this._useVAO&&d.bindVertexArray(null),this._attributes.forEach(function(t){t.isInstanced&&d.vertexAttribDivisor(t.attrPosition,0)})}},{key:"_updateIndexBuffer",value:function(){this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=d.createBuffer()),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.iBuffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}},{key:"computeNormals",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.generateFaces(),t?this._computeFaceNormals():this._computeVertexNormals()}},{key:"_computeFaceNormals",value:function(){for(var t=void 0,e=void 0,r=[],n=0;n<this._indices.length;n+=3){t=n/3,e=this._faces[t];var a=e.normal;r[e.indices[0]]=a,r[e.indices[1]]=a,r[e.indices[2]]=a}this.bufferNormal(r)}},{key:"_computeVertexNormals",value:function(){for(var t=void 0,e=f.vec3.create(),r=[],n=this.vertices,a=0;a<n.length;a++){f.vec3.set(e,0,0,0);for(var i=0;i<this._faces.length;i++)t=this._faces[i],t.indices.indexOf(a)>=0&&(e[0]+=t.normal[0],e[1]+=t.normal[1],e[2]+=t.normal[2]);f.vec3.normalize(e,e),r.push([e[0],e[1],e[2]])}this.bufferNormal(r)}},{key:"generateFaces",value:function(){for(var t=void 0,e=void 0,r=void 0,n=void 0,a=void 0,i=void 0,u=(f.vec3.create(),f.vec3.create(),f.vec3.create(),this.vertices),o=0;o<this._indices.length;o+=3){t=this._indices[o],e=this._indices[o+1],r=this._indices[o+2],n=u[t],a=u[e],i=u[r];var s={indices:[t,e,r],vertices:[n,a,i]};this._faces.push(s)}}},{key:"getAttribute",value:function(t){return this._attributes.find(function(e){return e.name===t})}},{key:"getSource",value:function(t){var e=this.getAttribute(t);return e?e.source:[]}},{key:"vertices",get:function(){return this.getSource("aVertexPosition")}},{key:"normals",get:function(){return this.getSource("aNormal")}},{key:"coords",get:function(){return this.getSource("aTextureCoord")}},{key:"indices",get:function(){return this._indices}},{key:"vertexSize",get:function(){return this.vertices.length}},{key:"faces",get:function(){return this._faces}},{key:"attributes",get:function(){return this._attributes}},{key:"hasVAO",get:function(){return this._hasVAO}},{key:"vao",get:function(){return this._vao}},{key:"numInstance",get:function(){return this._numInstance}},{key:"isInstanced",get:function(){return this._isInstanced}}]),t}();e.default=p,t.exports=e.default},function(t,e,r){t.exports=!r(25)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(24),a=r(63),i=r(48),u=Object.defineProperty;e.f=r(16)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),a)try{return u(t,e,r)}catch(o){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(15),i=n(a),u={},o=void 0;u.plane=function(t,e,r){for(var n=arguments.length<=3||void 0===arguments[3]?"xy":arguments[3],a=arguments.length<=4||void 0===arguments[4]?4:arguments[4],u=[],o=[],s=[],l=[],f=t/r,h=e/r,c=1/r,d=.5*-t,_=.5*-e,v=0,p=0;r>p;p++)for(var M=0;r>M;M++){var m=f*p+d,x=h*M+_,E=p/r,T=M/r;"xz"===n?(u.push([m,0,x+h]),u.push([m+f,0,x+h]),u.push([m+f,0,x]),u.push([m,0,x]),o.push([E,1-(T+c)]),o.push([E+c,1-(T+c)]),o.push([E+c,1-T]),o.push([E,1-T]),l.push([0,1,0]),l.push([0,1,0]),l.push([0,1,0]),l.push([0,1,0])):"yz"===n?(u.push([0,x,m]),u.push([0,x,m+f]),u.push([0,x+h,m+f]),u.push([0,x+h,m]),o.push([E,T]),o.push([E+c,T]),o.push([E+c,T+c]),o.push([E,T+c]),l.push([1,0,0]),l.push([1,0,0]),l.push([1,0,0]),l.push([1,0,0])):(u.push([m,x,0]),u.push([m+f,x,0]),u.push([m+f,x+h,0]),u.push([m,x+h,0]),o.push([E,T]),o.push([E+c,T]),o.push([E+c,T+c]),o.push([E,T+c]),l.push([0,0,1]),l.push([0,0,1]),l.push([0,0,1]),l.push([0,0,1])),s.push(4*v+0),s.push(4*v+1),s.push(4*v+2),s.push(4*v+0),s.push(4*v+2),s.push(4*v+3),v++}var g=new i.default(a);return g.bufferVertex(u),g.bufferTexCoord(o),g.bufferIndex(s),g.bufferNormal(l),g},u.sphere=function(t,e){function r(r,n){var a=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=r/e*Math.PI-.5*Math.PI,u=n/e*Math.PI*2,o=a?1:t,s=[];s[1]=Math.sin(i)*o;var l=Math.cos(i)*o;s[0]=Math.cos(u)*l,s[2]=Math.sin(u)*l;var f=1e4;return s[0]=Math.floor(s[0]*f)/f,s[1]=Math.floor(s[1]*f)/f,s[2]=Math.floor(s[2]*f)/f,s}for(var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a=arguments.length<=3||void 0===arguments[3]?4:arguments[3],u=[],o=[],s=[],l=[],f=1/e,h=0,c=0;e>c;c++)for(var d=0;e>d;d++){u.push(r(c,d)),u.push(r(c+1,d)),u.push(r(c+1,d+1)),u.push(r(c,d+1)),l.push(r(c,d,!0)),l.push(r(c+1,d,!0)),l.push(r(c+1,d+1,!0)),l.push(r(c,d+1,!0));var _=d/e,v=c/e;o.push([1-_,v]),o.push([1-_,v+f]),o.push([1-_-f,v+f]),o.push([1-_-f,v]),s.push(4*h+0),s.push(4*h+1),s.push(4*h+2),s.push(4*h+0),s.push(4*h+2),s.push(4*h+3),h++}n&&s.reverse();var p=new i.default(a);return p.bufferVertex(u),p.bufferTexCoord(o),p.bufferIndex(s),p.bufferNormal(l),p},u.cube=function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?4:arguments[3];e=e||t,r=r||t;var a=t/2,u=e/2,o=r/2,s=[],l=[],f=[],h=[],c=0;s.push([-a,u,-o]),s.push([a,u,-o]),s.push([a,-u,-o]),s.push([-a,-u,-o]),h.push([0,0,-1]),h.push([0,0,-1]),h.push([0,0,-1]),h.push([0,0,-1]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,u,-o]),s.push([a,u,o]),s.push([a,-u,o]),s.push([a,-u,-o]),h.push([1,0,0]),h.push([1,0,0]),h.push([1,0,0]),h.push([1,0,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,u,o]),s.push([-a,u,o]),s.push([-a,-u,o]),s.push([a,-u,o]),h.push([0,0,1]),h.push([0,0,1]),h.push([0,0,1]),h.push([0,0,1]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([-a,u,o]),s.push([-a,u,-o]),s.push([-a,-u,-o]),s.push([-a,-u,o]),h.push([-1,0,0]),h.push([-1,0,0]),h.push([-1,0,0]),h.push([-1,0,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,u,-o]),s.push([-a,u,-o]),s.push([-a,u,o]),s.push([a,u,o]),h.push([0,1,0]),h.push([0,1,0]),h.push([0,1,0]),h.push([0,1,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,-u,o]),s.push([-a,-u,o]),s.push([-a,-u,-o]),s.push([a,-u,-o]),h.push([0,-1,0]),h.push([0,-1,0]),h.push([0,-1,0]),h.push([0,-1,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++;var d=new i.default(n);return d.bufferVertex(s),d.bufferTexCoord(l),d.bufferIndex(f),d.bufferNormal(h),d},u.skybox=function(t){var e=arguments.length<=1||void 0===arguments[1]?4:arguments[1],r=[],n=[],a=[],u=[],o=0;r.push([t,t,-t]),r.push([-t,t,-t]),r.push([-t,-t,-t]),r.push([t,-t,-t]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([t,-t,-t]),r.push([t,-t,t]),r.push([t,t,t]),r.push([t,t,-t]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([-t,t,t]),r.push([t,t,t]),r.push([t,-t,t]),r.push([-t,-t,t]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([-t,-t,t]),r.push([-t,-t,-t]),r.push([-t,t,-t]),r.push([-t,t,t]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([t,t,t]),r.push([-t,t,t]),r.push([-t,t,-t]),r.push([t,t,-t]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([t,-t,-t]),r.push([-t,-t,-t]),r.push([-t,-t,t]),r.push([t,-t,t]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3);var s=new i.default(e);return s.bufferVertex(r),s.bufferTexCoord(n),s.bufferIndex(a),s.bufferNormal(u),s},u.bigTriangle=function(){if(!o){var t=[2,1,0],e=[[-1,-1],[-1,4],[4,-1]];o=new i.default,o.bufferData(e,"aPosition",2),o.bufferIndex(t)}return o},e.default=u,t.exports=e.default},function(t,e,r){var n=r(13),a=r(10),i=r(61),u=r(21),o="prototype",s=function(t,e,r){var l,f,h,c=t&s.F,d=t&s.G,_=t&s.S,v=t&s.P,p=t&s.B,M=t&s.W,m=d?a:a[e]||(a[e]={}),x=m[o],E=d?n:_?n[e]:(n[e]||{})[o];d&&(r=e);for(l in r)f=!c&&E&&void 0!==E[l],f&&l in m||(h=f?E[l]:r[l],m[l]=d&&"function"!=typeof E[l]?r[l]:p&&f?i(h,n):M&&E[l]==h?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[o]=t[o],e}(h):v&&"function"==typeof h?i(Function.call,h):h,v&&((m.virtual||(m.virtual={}))[l]=h,t&s.R&&x&&!x[l]&&u(x,l,h)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,r){var n=r(18),a=r(28);t.exports=r(16)?function(t,e,r){return n.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(46)("wks"),a=r(29),i=r(13).Symbol,u="function"==typeof i,o=t.exports=function(t){return n[t]||(n[t]=u&&i[t]||(u?i:a)("Symbol."+t))};o.store=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=60,i=function(){function t(){r(this,t),this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._loop()}return n(t,[{key:"addEF",value:function(t,e){e=e||[];var r=this._idTable;return this._enterframeTasks[r]={func:t,params:e},this._idTable++,r}},{key:"removeEF",value:function(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1}},{key:"delay",value:function(t,e,r){var n=(new Date).getTime(),a={func:t,params:e,delay:r,time:n};this._delayTasks.push(a)}},{key:"defer",value:function(t,e){var r={func:t,params:e};this._deferTasks.push(r)}},{key:"next",value:function(t,e){var r={func:t,params:e};this._nextTasks.push(r)}},{key:"usurp",value:function(t,e){var r={func:t,params:e};this._usurpTask.push(r)}},{key:"_process",value:function(){var t=0,e=void 0,r=void 0,n=void 0;for(t=0;t<this._enterframeTasks.length;t++)e=this._enterframeTasks[t],null!==e&&void 0!==e&&e.func(e.params);for(;this._highTasks.length>0;)e=this._highTasks.pop(),e.func(e.params);var i=(new Date).getTime();for(t=0;t<this._delayTasks.length;t++)e=this._delayTasks[t],i-e.time>e.delay&&(e.func(e.params),this._delayTasks.splice(t,1));for(i=(new Date).getTime(),r=1e3/a;this._deferTasks.length>0;){if(e=this._deferTasks.shift(),n=(new Date).getTime(),!(r>n-i)){this._deferTasks.unshift(e);break}e.func(e.params)}for(i=(new Date).getTime(),r=1e3/a;this._usurpTask.length>0;)e=this._usurpTask.shift(),n=(new Date).getTime(),r>n-i&&e.func(e.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[]}},{key:"_loop",value:function(){var t=this;this._process(),window.requestAnimationFrame(function(){return t._loop()})}}]),t}(),u=new i;e.default=u},function(t,e,r){var n=r(26);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(68),a=r(38);t.exports=Object.keys||function(t){return n(t,a)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports="// simpleColor.frag\n\n#define SHADER_NAME SIMPLE_COLOR\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color, opacity);\n}"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t){return 0!==t&&!(t&t-1)}function i(t){var e=t.width||t.videoWidth,r=t.height||t.videoHeight;return e&&r?a(e)&&a(r):!1}Object.defineProperty(e,"__esModule",{value:!0});var u=r(1),o=n(u),s=r(2),l=n(s),f=r(3),h=n(f),c=void 0,d=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if((0,o.default)(this,t),c=h.default.gl,r)this._texture=e;else{this._mSource=e,this._texture=c.createTexture(),this._isVideo="VIDEO"===e.tagName,this._premultiplyAlpha=!0,this._magFilter=n.magFilter||c.LINEAR,this._minFilter=n.minFilter||c.NEAREST_MIPMAP_LINEAR,this._wrapS=n.wrapS||c.MIRRORED_REPEAT,this._wrapT=n.wrapT||c.MIRRORED_REPEAT;var a=e.width||e.videoWidth;a?i(e)||(this._wrapS=this._wrapT=c.CLAMP_TO_EDGE,this._minFilter===c.NEAREST_MIPMAP_LINEAR&&(this._minFilter=c.LINEAR)):(this._wrapS=this._wrapT=c.CLAMP_TO_EDGE,this._minFilter===c.NEAREST_MIPMAP_LINEAR&&(this._minFilter=c.LINEAR)),c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),e.exposure?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,e.shape[0],e.shape[1],0,c.RGBA,c.FLOAT,e.data):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT);var u=h.default.getExtension("EXT_texture_filter_anisotropic");if(u){var s=c.getParameter(u.MAX_TEXTURE_MAX_ANISOTROPY_EXT);c.texParameterf(c.TEXTURE_2D,u.TEXTURE_MAX_ANISOTROPY_EXT,s)}this._canGenerateMipmap()&&c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null)}}return(0,l.default)(t,[{key:"generateMipmap",value:function(){this._canGenerateMipmap()&&(c.bindTexture(c.TEXTURE_2D,this._texture),c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null))}},{key:"updateTexture",value:function(t){t&&(this._mSource=t),c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this._mSource),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),this._canGenerateMipmap()&&c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null)}},{key:"bind",value:function(t){void 0===t&&(t=0),h.default.shader&&(c.activeTexture(c.TEXTURE0+t),c.bindTexture(c.TEXTURE_2D,this._texture),this._bindIndex=t)}},{key:"_canGenerateMipmap",value:function(){return this._minFilter===c.LINEAR_MIPMAP_NEAREST||this._minFilter===c.NEAREST_MIPMAP_LINEAR||this._minFilter===c.LINEAR_MIPMAP_LINEAR||this._minFilter===c.NEAREST_MIPMAP_NEAREST}},{key:"minFilter",set:function(t){return t!==c.LINEAR&&t!==c.NEAREST&&t!==c.NEAREST_MIPMAP_LINEAR&&t!==c.NEAREST_MIPMAP_LINEAR&&t!==c.LINEAR_MIPMAP_LINEAR&&t!==c.NEAREST_MIPMAP_NEAREST?this:(this._minFilter=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._minFilter}},{key:"magFilter",set:function(t){return t!==c.LINEAR&&t!==c.NEAREST?this:(this._magFilter=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._magFilter}},{key:"wrapS",set:function(t){return t!==c.CLAMP_TO_EDGE&&t!==c.REPEAT&&t!==c.MIRRORED_REPEAT?this:(this._wrapS=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._wrapS}},{key:"wrapT",set:function(t){return t!==c.CLAMP_TO_EDGE&&t!==c.REPEAT&&t!==c.MIRRORED_REPEAT?this:(this._wrapT=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._wrapT}},{key:"premultiplyAlpha",set:function(t){this._premultiplyAlpha=t,c.bindTexture(c.TEXTURE_2D,this._texture),console.log("premultiplyAlpha:",t),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._premultiplyAlpha}},{key:"texture",get:function(){return this._texture}}]),t}(),_=void 0,v=void 0,p=void 0;d.whiteTexture=function(){if(void 0===_){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,4,4),_=new d(t)}return _},d.greyTexture=function(){if(void 0===v){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),v=new d(t)}return v},d.blackTexture=function(){if(void 0===p){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),p=new d(t)}return p},e.default=d,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=function(){function t(){(0,i.default)(this,t),this._matrix=l.default.mat4.create(),this._quat=l.default.quat.create(),this._orientation=l.default.mat4.create(),this._projection=l.default.mat4.create(),this.position=l.default.vec3.create()}return(0,o.default)(t,[{key:"lookAt",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?[0,1,0]:arguments[2];this._eye=vec3.clone(t),this._center=vec3.clone(e),l.default.vec3.copy(this.position,t),l.default.mat4.identity(this._matrix),l.default.mat4.lookAt(this._matrix,t,e,r)}},{key:"setFromOrientation",value:function(t,e,r,n){l.default.quat.set(this._quat,t,e,r,n),l.default.mat4.fromQuat(this._orientation,this._quat),l.default.mat4.translate(this._matrix,this._orientation,this.positionOffset)}},{key:"setProjection",value:function(t){this._projection=l.default.mat4.clone(t)}},{key:"setView",value:function(t){this._matrix=l.default.mat4.clone(t)}},{key:"setFromViewProj",value:function(t,e){this.setView(t),this.setProjection(e)}},{key:"matrix",get:function(){return this._matrix}},{key:"viewMatrix",get:function(){return this._matrix}},{key:"projection",get:function(){return this._projection}},{key:"projectionMatrix",get:function(){return this._projection}},{key:"eye",get:function(){return this._eye}},{key:"center",get:function(){return this._center}}]),t}();e.default=f,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),_=r(32),v=n(_),p=r(56),M=n(p),m=r(8),x=n(m),E=x.default.mat4,T=x.default.vec3,g=E.create(),b=T.create(),S=function(t){function e(){return(0,o.default)(this,e),(0,h.default)(this,(0,i.default)(e).apply(this,arguments))}return(0,d.default)(e,t),(0,l.default)(e,[{key:"setPerspective",value:function(t,e,r,n){this._fov=t,this._near=r,this._far=n,this._aspectRatio=e,x.default.mat4.perspective(this._projection,t,e,r,n)}},{key:"setAspectRatio",value:function(t){this._aspectRatio=t,x.default.mat4.perspective(this.projection,this._fov,t,this._near,this._far)}},{key:"generateRay",value:function(t,e){var r=this.projectionMatrix,n=this.viewMatrix;return E.multiply(g,r,n),E.invert(g,g),T.transformMat4(b,t,g),T.sub(b,b,this.position),T.normalize(b,b),e?(e.origin=this.position,e.direction=b):e=new M.default(this.position,b),e}}]),e}(v.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=function(){function t(){var e=this,r=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];(0,i.default)(this,t),this._req=new XMLHttpRequest,this._req.addEventListener("load",function(t){return e._onLoaded(t)}),this._req.addEventListener("progress",function(t){return e._onProgress(t)}),r&&(this._req.responseType="arraybuffer")}return(0,o.default)(t,[{key:"load",value:function(t,e){console.log("Loading : ",t),this._callback=e,this._req.open("GET",t),this._req.send()}},{key:"_onLoaded",value:function(){this._callback(this._req.response)}},{key:"_onProgress",value:function(){}}]),t}();e.default=s,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(23),l=n(s),f=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?.1:arguments[1];(0,i.default)(this,t),this.easing=n,this._value=e,this._targetValue=e,this._efIndex=l.default.addEF(function(){return r._update()})}return(0,o.default)(t,[{key:"_update",value:function(){var t=1e-4;this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<t&&(this._value=this._targetValue)}},{key:"setTo",value:function(t){this._targetValue=this._value=t}},{key:"add",value:function(t){this._targetValue+=t}},{key:"limit",value:function(t,e){return t>e?void this.limit(e,t):(this._min=t,this._max=e,void this._checkLimit())}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){l.default.removeEF(this._efIndex)}},{key:"value",set:function(t){this._targetValue=t},get:function(){return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),t}();e.default=f,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=r(113),i=n(a),u=r(112),o=n(u),s="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default?"symbol":typeof t};e.default="function"==typeof o.default&&"symbol"===s(i.default)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e,r){var n=r(24),a=r(132),i=r(38),u=r(45)("IE_PROTO"),o=function(){},s="prototype",l=function(){var t,e=r(62)("iframe"),n=i.length,a=">";for(e.style.display="none",r(125).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+a),t.close(),l=t.F;n--;)delete l[s][i[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(o[s]=n(t),r=new o,o[s]=null,r[u]=t):r=l(),void 0===e?r:a(r,e)}},function(t,e,r){var n=r(43),a=r(28),i=r(14),u=r(48),o=r(17),s=r(63),l=Object.getOwnPropertyDescriptor;e.f=r(16)?l:function(t,e){if(t=i(t),e=u(e,!0),s)try{return l(t,e)}catch(r){}return o(t,e)?a(!n.f.call(t,e),t[e]):void 0}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(18).f,a=r(17),i=r(22)("toStringTag");t.exports=function(t,e,r){t&&!a(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(46)("keys"),a=r(29);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e,r){var n=r(13),a="__core-js_shared__",i=n[a]||(n[a]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(26);t.exports=function(t,e){if(!n(t))return t;var r,a;if(e&&"function"==typeof(r=t.toString)&&!n(a=r.call(t)))return a;if("function"==typeof(r=t.valueOf)&&!n(a=r.call(t)))return a;if(!e&&"function"==typeof(r=t.toString)&&!n(a=r.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(13),a=r(10),i=r(40),u=r(50),o=r(18).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:u.f(t)})}},function(t,e,r){e.f=r(22)},function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}"},function(t,e){t.exports="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(156),h=n(f),c=void 0,d=131072,_=7,v=31,p=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if((0,i.default)(this,t),c=l.default.gl,n)return void(this.texture=e);var a=e.length>6;e[0].mipmapCount&&(a=e[0].mipmapCount>1),this.texture=c.createTexture(),this.magFilter=r.magFilter||c.LINEAR,this.minFilter=r.minFilter||c.LINEAR_MIPMAP_LINEAR,this.wrapS=r.wrapS||c.CLAMP_TO_EDGE,this.wrapT=r.wrapT||c.CLAMP_TO_EDGE,a||this.minFilter!=c.LINEAR_MIPMAP_LINEAR||(this.minFilter=c.LINEAR),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture);var u=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z],o=1,s=0;if(o=e.length/6,this.numLevels=o,a)for(var f=0;6>f;f++)for(var h=0;o>h;h++)c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),s=f*o+h,e[s].shape?c.texImage2D(u[f],h,c.RGBA,e[s].shape[0],e[s].shape[1],0,c.RGBA,c.FLOAT,e[s].data):c.texImage2D(u[f],h,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e[s]),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter);else{for(var d=0,_=0;6>_;_++)d=_*o,c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),e[d].shape?c.texImage2D(u[_],0,c.RGBA,e[d].shape[0],e[d].shape[1],0,c.RGBA,c.FLOAT,e[d].data):c.texImage2D(u[_],0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e[d]),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter);c.generateMipmap(c.TEXTURE_CUBE_MAP)}c.bindTexture(c.TEXTURE_CUBE_MAP,null)}return(0,o.default)(t,[{key:"bind",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];l.default.shader&&(c.activeTexture(c.TEXTURE0+t),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture),c.uniform1i(l.default.shader.uniformTextures[t],t),this._bindIndex=t)}},{key:"unbind",value:function(){c.bindTexture(c.TEXTURE_CUBE_MAP,null)}}]),t}();p.parseDDS=function(t){var e=(0,h.default)(t),r=e.flags,n=new Int32Array(t,0,v),a=1;r&d&&(a=Math.max(1,n[_]));var i=e.images.map(function(e){var r=new Float32Array(t.slice(e.offset,e.offset+e.length));return{data:r,shape:e.shape,mipmapCount:a}});return new p(i)},e.default=p,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),_=r(32),v=n(_),p=r(8),M=n(p),m=function(t){function e(){(0,o.default)(this,e);var t=(0,h.default)(this,(0,i.default)(e).call(this)),r=M.default.vec3.clone([0,0,15]),n=M.default.vec3.create(),a=M.default.vec3.clone([0,-1,0]);return t.lookAt(r,n,a),t.ortho(1,-1,1,-1),t}return(0,d.default)(e,t),(0,l.default)(e,[{key:"setBoundary",value:function(t,e,r,n){var a=arguments.length<=4||void 0===arguments[4]?.1:arguments[4],i=arguments.length<=5||void 0===arguments[5]?100:arguments[5];this.ortho(t,e,r,n,a,i)}},{key:"ortho",value:function(t,e,r,n){var a=arguments.length<=4||void 0===arguments[4]?.1:arguments[4],i=arguments.length<=5||void 0===arguments[5]?100:arguments[5];this.left=t,this.right=e,this.top=r,this.bottom=n,M.default.mat4.ortho(this._projection,t,e,r,n,a,i)}}]),e}(v.default);e.default=m,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=(l.default.mat4,l.default.vec3),h=f.create(),c=f.create(),d=f.create(),_=f.create(),v=f.create(),p=f.create(),M=f.create(),m=f.create(),x=function(){function t(e,r){(0,i.default)(this,t),this.origin=f.clone(e),this.direction=f.clone(r)}return(0,o.default)(t,[{key:"at",value:function(t){return f.copy(_,this.direction),f.scale(_,_,t),f.add(_,_,this.origin),_}},{key:"lookAt",value:function(t){f.sub(this.direction,t,this.origin),f.normalize(this.origin,this.origin)}},{key:"closestPointToPoint",value:function(t){var e=f.create();f.sub(t,this.origin);var r=f.dot(e,this.direction);return 0>r?f.clone(this.origin):(f.copy(e,this.direction),f.scale(e,e,r),f.add(e,e,this.origin),e)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=f.create();f.sub(e,t,this.origin);var r=f.dot(e,this.direction);return 0>r?f.squaredDistance(this.origin,t):(f.copy(e,this.direction),f.scale(e,e,r),f.add(e,e,this.origin),f.squaredDistance(e,t))}},{key:"intersectsSphere",value:function(t,e){return this.distanceToPoint(t)<=e}},{key:"intersectSphere",value:function(t,e){var r=f.create();f.sub(r,t,this.origin);var n=f.dot(r,this.direction),a=f.dot(r,r)-n*n,i=e*e;if(a>i)return null;var u=Math.sqrt(i-a),o=n-u,s=n+u;return 0>o&&0>s?null:0>o?this.at(s):this.at(o)}},{key:"distanceToPlane",value:function(t,e){f.dot(e,this.direction)}},{key:"intersectTriangle",value:function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];f.copy(h,t),f.copy(c,e),f.copy(d,r),f.sub(v,c,h),f.sub(p,d,h),f.cross(M,v,p);var a=f.dot(this.direction,M),i=void 0;if(a>0){if(n)return null;i=1}else{if(!(0>a))return null;i=-1,a=-a}f.sub(m,this.origin,h),f.cross(p,m,p);var u=i*f.dot(this.direction,p);if(0>u)return null;f.cross(v,v,m);var o=i*f.dot(this.direction,v);if(0>o)return null;if(u+o>a)return null;var s=-i*f.dot(m,M);return 0>s?null:this.at(s/a)}}]),t}();e.default=x,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=function(){function t(){(0,i.default)(this,t),this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._position=s.vec3.create(),this._scale=s.vec3.fromValues(1,1,1),this._rotation=s.vec3.create(),this._matrix=s.mat4.create(),this._matrixRotation=s.mat4.create(),this._matrixScale=s.mat4.create(),this._matrixTranslation=s.mat4.create(),this._matrixQuaternion=s.mat4.create(),this._quat=s.quat.create()}return(0,o.default)(t,[{key:"_update",value:function(){s.vec3.set(this._scale,this._sx,this._sy,this._sz),s.vec3.set(this._rotation,this._rx,this._ry,this._rz),s.vec3.set(this._position,this._x,this._y,this._z),s.mat4.identity(this._matrixTranslation,this._matrixTranslation),s.mat4.identity(this._matrixScale,this._matrixScale),s.mat4.identity(this._matrixRotation,this._matrixRotation),s.mat4.rotateX(this._matrixRotation,this._matrixRotation,this._rx),s.mat4.rotateY(this._matrixRotation,this._matrixRotation,this._ry),s.mat4.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),s.mat4.fromQuat(this._matrixQuaternion,this._quat),s.mat4.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),s.mat4.scale(this._matrixScale,this._matrixScale,this._scale),s.mat4.translate(this._matrixTranslation,this._matrixTranslation,this._position),s.mat4.mul(this._matrix,this._matrixTranslation,this._matrixRotation),s.mat4.mul(this._matrix,this._matrix,this._matrixScale),this._needUpdate=!1}},{key:"setRotationFromQuaternion",value:function(t){s.quat.copy(this._quat,t),this._needUpdate=!0}},{key:"matrix",get:function(){return this._needUpdate&&this._update(),this._matrix}},{key:"x",get:function(){return this._x},set:function(t){this._needUpdate=!0,this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._needUpdate=!0,this._y=t}},{key:"z",get:function(){return this._z},set:function(t){this._needUpdate=!0,this._z=t}},{key:"scaleX",get:function(){return this._sx},set:function(t){this._needUpdate=!0,this._sx=t}},{key:"scaleY",get:function(){return this._sy},set:function(t){this._needUpdate=!0,this._sy=t}},{key:"scaleZ",get:function(){return this._sz},set:function(t){this._needUpdate=!0,this._sz=t}},{key:"rotationX",get:function(){return this._rx},set:function(t){this._needUpdate=!0,this._rx=t}},{key:"rotationY",get:function(){return this._ry},set:function(t){this._needUpdate=!0,this._ry=t}},{key:"rotationZ",get:function(){return this._rz},set:function(t){this._needUpdate=!0,this._rz=t}}]),t}();e.default=l,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(35),l=n(s),f=r(23),h=n(f),c=r(8),d=n(c),_=function(t,e){var r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r},v=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?window:arguments[1],a=arguments.length<=2||void 0===arguments[2]?500:arguments[2];(0,i.default)(this,t),this._target=e,this._listenerTarget=n,this._mouse={},this._preMouse={},this.center=d.default.vec3.create(),this._up=d.default.vec3.fromValues(0,1,0),this.radius=new l.default(a),this.position=d.default.vec3.fromValues(0,0,this.radius.value),this.positionOffset=d.default.vec3.create(),this._rx=new l.default(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new l.default(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._listenerTarget.addEventListener("mousewheel",function(t){return r._onWheel(t)}),this._listenerTarget.addEventListener("DOMMouseScroll",function(t){return r._onWheel(t)}),this._listenerTarget.addEventListener("mousedown",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("touchstart",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("mousemove",function(t){return r._onMove(t)}),this._listenerTarget.addEventListener("touchmove",function(t){return r._onMove(t)}),window.addEventListener("touchend",function(){return r._onUp()}),window.addEventListener("mouseup",function(){return r._onUp()}),h.default.addEF(function(){return r._loop()})}return(0,o.default)(t,[{key:"lock",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._isLockZoom=t,this._isLockRotation=t}},{key:"lockZoom",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._isLockZoom=t}},{key:"lockRotation",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._isLockRotation=t}},{key:"inverseControl",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._isInvert=t}},{key:"_onDown",value:function(t){this._isLockRotation||(this._isMouseDown=!0,_(t,this._mouse),_(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}},{key:"_onMove",value:function(t){if(!this._isLockRotation&&(_(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){var e=-(this._mouse.x-this._preMouse.x);this._isInvert&&(e*=-1),this._ry.value=this._preRY-.01*e*this.sensitivity;var r=-(this._mouse.y-this._preMouse.y);this._isInvert&&(r*=-1),this._rx.value=this._preRX-.01*r*this.sensitivity}}},{key:"_onUp",value:function(){this._isLockRotation||(this._isMouseDown=!1)}},{key:"_onWheel",value:function(t){if(!this._isLockZoom){var e=t.wheelDelta,r=t.detail,n=0;n=r?e?e/r/40*r>0?1:-1:-r/3:e/120,this.radius.add(2*-n)}}},{key:"_loop",value:function(){this._updatePosition(),this._target&&this._updateCamera()}},{key:"_updatePosition",value:function(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;var t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t,d.default.vec3.add(this.position,this.position,this.positionOffset)}},{key:"_updateCamera",value:function(){this._target.lookAt(this.position,this.center,this._up)}},{key:"rx",get:function(){return this._rx}},{key:"ry",get:function(){return this._ry}}]),t}();e.default=v,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[r]&&(e.cacheAttribLoc[r]=t.getAttribLocation(e,r)),e.cacheAttribLoc[r]},t.exports=e.default},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(121);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,a){return t.call(e,r,n,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(26),a=r(13).document,i=n(a)&&n(a.createElement);t.exports=function(t){return i?a.createElement(t):{}}},function(t,e,r){t.exports=!r(16)&&!r(25)(function(){return 7!=Object.defineProperty(r(62)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";var n=r(40),a=r(20),i=r(70),u=r(21),o=r(17),s=r(39),l=r(128),f=r(44),h=r(67),c=r(22)("iterator"),d=!([].keys&&"next"in[].keys()),_="@@iterator",v="keys",p="values",M=function(){return this};t.exports=function(t,e,r,m,x,E,T){l(r,e,m);var g,b,S,I=function(t){if(!d&&t in A)return A[t];switch(t){case v:return function(){return new r(this,t)};case p:return function(){return new r(this,t)}}return function(){return new r(this,t)}},y=e+" Iterator",F=x==p,R=!1,A=t.prototype,D=A[c]||A[_]||x&&A[x],w=D||I(x),P=x?F?I("entries"):w:void 0,O="Array"==e?A.entries||D:D;if(O&&(S=h(O.call(new t)),S!==Object.prototype&&(f(S,y,!0),n||o(S,c)||u(S,c,M))),F&&D&&D.name!==p&&(R=!0,w=function(){return D.call(this)}),n&&!T||!d&&!R&&A[c]||u(A,c,w),s[e]=w,s[y]=M,x)if(g={values:F?w:I(p),keys:E?w:I(v),entries:P},T)for(b in g)b in A||i(A,b,g[b]);else a(a.P+a.F*(d||R),e,g);return g}},function(t,e,r){var n=r(68),a=r(38).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(17),a=r(71),i=r(45)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,r){var n=r(17),a=r(14),i=r(123)(!1),u=r(45)("IE_PROTO");t.exports=function(t,e){var r,o=a(t),s=0,l=[];for(r in o)r!=u&&n(o,r)&&l.push(r);for(;e.length>s;)n(o,r=e[s++])&&(~i(l,r)||l.push(r));return l}},function(t,e,r){var n=r(20),a=r(10),i=r(25);t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],u={};u[t]=e(r),n(n.S+n.F*i(function(){r(1)}),"Object",u)}},function(t,e,r){t.exports=r(21)},function(t,e,r){var n=r(37);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,r,a,i,u,o,s,l){var f=new n.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=r,f[3]=a,f[4]=i,f[5]=u,f[6]=o,f[7]=s,f[8]=l,f},a.set=function(t,e,r,n,a,i,u,o,s,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=f*u-o*l,c=-f*i+o*s,d=l*i-u*s,_=r*h+n*c+a*d;return _?(_=1/_,t[0]=h*_,t[1]=(-f*n+a*l)*_,t[2]=(o*n-a*u)*_,t[3]=c*_,t[4]=(f*r-a*s)*_,t[5]=(-o*r+a*i)*_,t[6]=d*_,t[7]=(-l*r+n*s)*_,t[8]=(u*r-n*i)*_,t):null},a.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8];return t[0]=u*f-o*l,t[1]=a*l-n*f,t[2]=n*o-a*u,t[3]=o*s-i*f,t[4]=r*f-a*s,t[5]=a*i-r*o,t[6]=i*l-u*s,t[7]=n*s-r*l,t[8]=r*u-n*i,t},a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],l=t[8];return e*(l*i-u*s)+r*(-l*a+u*o)+n*(s*a-i*o)},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=r[0],d=r[1],_=r[2],v=r[3],p=r[4],M=r[5],m=r[6],x=r[7],E=r[8];return t[0]=c*n+d*u+_*l,t[1]=c*a+d*o+_*f,t[2]=c*i+d*s+_*h,t[3]=v*n+p*u+M*l,t[4]=v*a+p*o+M*f,t[5]=v*i+p*s+M*h,t[6]=m*n+x*u+E*l,t[7]=m*a+x*o+E*f,t[8]=m*i+x*s+E*h,t},a.mul=a.multiply,a.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=r[0],d=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=c*n+d*u+l,t[7]=c*a+d*o+f,t[8]=c*i+d*s+h,t},a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=Math.sin(r),d=Math.cos(r);return t[0]=d*n+c*u,t[1]=d*a+c*o,t[2]=d*i+c*s,t[3]=d*u-c*n,t[4]=d*o-c*a,t[5]=d*s-c*i,t[6]=l,t[7]=f,t[8]=h,t},a.scale=function(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r+r,o=n+n,s=a+a,l=r*u,f=n*u,h=n*o,c=a*u,d=a*o,_=a*s,v=i*u,p=i*o,M=i*s;return t[0]=1-h-_,t[3]=f-M,t[6]=c+p,t[1]=f+M,t[4]=1-l-_,t[7]=d-v,t[2]=c-p,t[5]=d+v,t[8]=1-l-h,t},a.normalFromMat4=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=e[9],c=e[10],d=e[11],_=e[12],v=e[13],p=e[14],M=e[15],m=r*o-n*u,x=r*s-a*u,E=r*l-i*u,T=n*s-a*o,g=n*l-i*o,b=a*l-i*s,S=f*v-h*_,I=f*p-c*_,y=f*M-d*_,F=h*p-c*v,R=h*M-d*v,A=c*M-d*p,D=m*A-x*R+E*F+T*y-g*I+b*S;return D?(D=1/D,t[0]=(o*A-s*R+l*F)*D,t[1]=(s*y-u*A-l*I)*D,t[2]=(u*R-o*y+l*S)*D,t[3]=(a*R-n*A-i*F)*D,t[4]=(r*A-a*y+i*I)*D,t[5]=(n*y-r*R-i*S)*D,t[6]=(v*b-p*g+M*T)*D,t[7]=(p*E-_*b-M*x)*D,t[8]=(_*g-v*E+M*m)*D,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],l=t[6],f=t[7],h=t[8],c=e[0],d=e[1],_=e[2],v=e[3],p=e[4],M=e[5],m=t[6],x=e[7],E=e[8];return Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-d)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-_)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(u-v)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-M)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-m)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(f-x)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(h-E)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(E));
},t.exports=a},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,r){var a=new n.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=r,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],s=r[2];return t[0]=a*s-i*o,t[1]=i*u-n*s,t[2]=n*o-a*u,t},a.lerp=function(t,e,r,n){var a=e[0],i=e[1],u=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t},a.hermite=function(t,e,r,n,a,i){var u=i*i,o=u*(2*i-3)+1,s=u*(i-2)+i,l=u*(i-1),f=u*(3-2*i);return t[0]=e[0]*o+r[0]*s+n[0]*l+a[0]*f,t[1]=e[1]*o+r[1]*s+n[1]*l+a[1]*f,t[2]=e[2]*o+r[2]*s+n[2]*l+a[2]*f,t},a.bezier=function(t,e,r,n,a,i){var u=1-i,o=u*u,s=i*i,l=o*u,f=3*i*o,h=3*s*u,c=s*i;return t[0]=e[0]*l+r[0]*f+n[0]*h+a[0]*c,t[1]=e[1]*l+r[1]*f+n[1]*h+a[1]*c,t[2]=e[2]*l+r[2]*f+n[2]*h+a[2]*c,t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,a=2*n.RANDOM()-1,i=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=a*e,t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[3]*n+r[7]*a+r[11]*i+r[15];return u=u||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/u,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/u,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/u,t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],s=r[2],l=r[3],f=l*n+o*i-s*a,h=l*a+s*n-u*i,c=l*i+u*a-o*n,d=-u*n-o*a-s*i;return t[0]=f*l+d*-u+h*-s-c*-o,t[1]=h*l+d*-o+c*-u-f*-s,t[2]=c*l+d*-s+f*-o-h*-u,t},a.rotateX=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.rotateY=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.rotateZ=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,u){var o,s;for(r||(r=3),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,o=n;s>o;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),a.angle=function(t,e){var r=a.fromValues(t[0],t[1],t[2]),n=a.fromValues(e[0],e[1],e[2]);a.normalize(r,r),a.normalize(n,n);var i=a.dot(r,n);return i>1?0:Math.acos(i)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=e[0],o=e[1],s=e[2];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-o)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))},t.exports=a},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,r,a){var i=new n.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=a,i},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+i*i)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r*r+n*n+a*a+i*i;return u>0&&(u=1/Math.sqrt(u),t[0]=r*u,t[1]=n*u,t[2]=a*u,t[3]=i*u),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,r,n){var a=e[0],i=e[1],u=e[2],o=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t[3]=o+n*(r[3]-o),t},a.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*u,t[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*u,t[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*u,t[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*u,t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],s=r[2],l=r[3],f=l*n+o*i-s*a,h=l*a+s*n-u*i,c=l*i+u*a-o*n,d=-u*n-o*a-s*i;return t[0]=f*l+d*-u+h*-s-c*-o,t[1]=h*l+d*-o+c*-u-f*-s,t[2]=c*l+d*-s+f*-o-h*-u,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,u){var o,s;for(r||(r=4),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,o=n;s>o;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-f)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))},t.exports=a},function(t,e){t.exports="// generalWithNormal.vert\n\n#define SHADER_NAME GENERAL_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec3 position;\nuniform vec3 scale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n	vec3 pos      = aVertexPosition * scale;\n	pos           += position;\n	gl_Position   = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n	\n	vTextureCoord = aTextureCoord;\n	vNormal       = normalize(uNormalMatrix * aNormal);\n}"},function(t,e){t.exports="// basic.frag\n\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\nuniform samplerCube texture;\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\n\nvoid main(void) {\n    gl_FragColor = textureCube(texture, vVertex);\n}"},function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME SKYBOX_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\nvarying vec3 vNormal;\n\nvoid main(void) {\n	mat4 matView = uViewMatrix;\n	matView[3][0] = 0.0;\n	matView[3][1] = 0.0;\n	matView[3][2] = 0.0;\n	\n	gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n	vTextureCoord = aTextureCoord;\n	\n	vVertex = aVertexPosition;\n	vNormal = aNormal;\n}"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=r(3),h=n(f),c=r(7),d=n(c),_=r(31),v=n(_),p=r(54),M=n(p),m=r(15),x=n(m),E=r(19),T=n(E),g=r(9),b=n(g),S=r(80),I=n(S),y=r(79),F=n(y),R=r(81),A=n(R),D=r(82),w=n(D),P=r(23),O=n(P),N=r(98),L=n(N),k=r(35),U=n(k),C=r(103),B=n(C),X=r(58),V=n(X),z=r(101),j=n(z),G=r(32),Y=n(G),q=r(55),W=n(q),H=r(33),Z=n(H),Q=r(83),K=n(Q),J=r(56),$=n(J),tt=r(57),et=n(tt),rt=r(34),nt=n(rt),at=r(97),it=n(at),ut=r(96),ot=n(ut),st=r(86),lt=n(st),ft=r(84),ht=n(ft),ct=r(85),dt=n(ct),_t=r(87),vt=n(_t),pt=r(89),Mt=n(pt),mt=r(91),xt=n(mt),Et=r(90),Tt=n(Et),gt=r(88),bt=n(gt),St=r(92),It=n(St),yt=r(94),Ft=n(yt),Rt=r(95),At=n(Rt),Dt=r(93),wt=n(Dt),Pt=r(102),Ot=n(Pt),Nt="0.1.24",Lt=function(){function t(){(0,i.default)(this,t),this.glm=l.default,this.GL=h.default,this.GLTool=h.default,this.GLShader=d.default,this.GLTexture=v.default,this.GLCubeTexture=M.default,this.Mesh=x.default,this.Geom=T.default,this.Batch=b.default,this.FrameBuffer=I.default,this.CubeFrameBuffer=F.default,this.Scheduler=O.default,this.EventDispatcher=L.default,this.EaseNumber=U.default,this.TweenNumber=B.default,this.Camera=Y.default,this.CameraOrtho=W.default,this.CameraPerspective=Z.default,this.Ray=$.default,this.CameraCube=K.default,this.OrbitalControl=V.default,this.QuatRotation=j.default,this.BinaryLoader=nt.default,this.ObjLoader=it.default,this.HDRLoader=ot.default,this.BatchCopy=lt.default,this.BatchAxis=ht.default,this.BatchBall=dt.default,this.BatchBall=dt.default,this.BatchLine=Mt.default,this.BatchSkybox=xt.default,this.BatchSky=Tt.default,this.BatchFXAA=bt.default,this.BatchDotsPlane=vt.default,this.Scene=It.default,this.View=Ft.default,this.View3D=At.default,this.Object3D=et.default,this.ShaderLibs=Ot.default,this.ShaderUtils=wt.default,this.MultisampleFrameBuffer=A.default,this.TransformFeedbackObject=w.default;for(var e in l.default)l.default[e]&&(window[e]=l.default[e])}return(0,o.default)(t,[{key:"log",value:function(){navigator.userAgent.indexOf("Chrome")>-1?console.log("%clib alfrid : VERSION "+Nt,"background: #193441; color: #FCFFF5"):console.log("lib alfrid : VERSION ",Nt),console.log("%cClasses : ","color: #193441");for(var t in this)this[t]&&console.log("%c - "+t,"color: #3E606F")}}]),t}(),kt=new Lt;e.default=kt,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(54),h=n(f),c=void 0,d=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,i.default)(this,t),c=l.default.gl,this._size=e,this.magFilter=r.magFilter||c.LINEAR,this.minFilter=r.minFilter||c.LINEAR,this.wrapS=r.wrapS||c.CLAMP_TO_EDGE,this.wrapT=r.wrapT||c.CLAMP_TO_EDGE,this._init()}return(0,o.default)(t,[{key:"_init",value:function(){this.texture=c.createTexture(),this.glTexture=new h.default(this.texture,{},!0),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT);for(var t=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z],e=0;e<t.length;e++)c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),c.texImage2D(t[e],0,c.RGBA,this.width,this.height,0,c.RGBA,c.FLOAT,null);this._frameBuffers=[];for(var r=0;r<t.length;r++){var n=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,n),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,t[r],this.texture,0);var a=c.checkFramebufferStatus(c.FRAMEBUFFER);a!==c.FRAMEBUFFER_COMPLETE&&console.log("'gl.checkFramebufferStatus() returned '"+a),this._frameBuffers.push(n)}c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindRenderbuffer(c.RENDERBUFFER,null),c.bindTexture(c.TEXTURE_CUBE_MAP,null)}},{key:"bind",value:function(t){l.default.viewport(0,0,this.width,this.height),c.bindFramebuffer(c.FRAMEBUFFER,this._frameBuffers[t])}},{key:"unbind",value:function(){c.bindFramebuffer(c.FRAMEBUFFER,null),l.default.viewport(0,0,l.default.width,l.default.height)}},{key:"getTexture",value:function(){return this.glTexture}},{key:"width",get:function(){return this._size}},{key:"height",get:function(){return this._size}}]),t}();e.default=d,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t){return 0!==t&&!(t&t-1)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=n(i),o=r(2),s=n(o),l=r(3),f=n(l),h=r(31),c=n(h),d=void 0,_=void 0,v=!1,p=void 0,M=function(){return f.default.webgl2?!0:(p=f.default.getExtension("WEBGL_draw_buffers"),!!p)},m=function(){function t(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];(0,u.default)(this,t),d=f.default.gl,_=f.default.checkExtension("WEBGL_depth_texture"),this.width=e,this.height=r,this._multipleTargets=i,this.magFilter=n.magFilter||d.LINEAR,this.minFilter=n.minFilter||d.LINEAR_MIPMAP_NEAREST,this.wrapS=n.wrapS||d.CLAMP_TO_EDGE,this.wrapT=n.wrapT||d.CLAMP_TO_EDGE,this.useDepth=n.useDepth||!0,this.useStencil=n.useStencil||!1,this.texelType=n.type,a(this.width)&&a(this.height)||(this.wrapS=this.wrapT=d.CLAMP_TO_EDGE,this.minFilter===d.LINEAR_MIPMAP_NEAREST&&(this.minFilter=d.LINEAR)),v||M(),this._init()}return(0,s.default)(t,[{key:"_init",value:function(){var t=d.UNSIGNED_BYTE;if(this.texelType&&(t=this.texelType),this.texelType=t,this._textures=[],this._initTextures(),this.frameBuffer=d.createFramebuffer(),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer),f.default.webgl2){for(var e=[],r=0;r<this._textures.length;r++)d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0+r,d.TEXTURE_2D,this._textures[r].texture,0),e.push(d["COLOR_ATTACHMENT"+r]);d.drawBuffers(e),d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,this.glDepthTexture.texture,0)}else{for(var n=0;n<this._textures.length;n++)d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+n,d.TEXTURE_2D,this._textures[n].texture,0);this._multipleTargets&&p.drawBuffersWEBGL([p.COLOR_ATTACHMENT0_WEBGL,p.COLOR_ATTACHMENT1_WEBGL,p.COLOR_ATTACHMENT2_WEBGL,p.COLOR_ATTACHMENT3_WEBGL]),_&&d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,this.glDepthTexture.texture,0)}if(this.minFilter===d.LINEAR_MIPMAP_NEAREST)for(var a=0;a<this._textures.length;a++)d.bindTexture(d.TEXTURE_2D,this._textures[a].texture),d.generateMipmap(d.TEXTURE_2D);var i=d.checkFramebufferStatus(d.FRAMEBUFFER);i!=d.FRAMEBUFFER_COMPLETE&&console.log("GL_FRAMEBUFFER_COMPLETE failed, CANNOT use Framebuffer"),d.bindTexture(d.TEXTURE_2D,null),d.bindRenderbuffer(d.RENDERBUFFER,null),d.bindFramebuffer(d.FRAMEBUFFER,null),this.clear()}},{key:"_initTextures",value:function(){for(var t=(this._multipleTargets?4:1,0);4>t;t++){var e=this._createTexture();this._textures.push(e)}f.default.webgl2?this.glDepthTexture=this._createTexture(d.DEPTH_COMPONENT16,d.UNSIGNED_SHORT,d.DEPTH_COMPONENT,!0):this.glDepthTexture=this._createTexture(d.DEPTH_COMPONENT,d.UNSIGNED_SHORT)}},{key:"_createTexture",value:function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];void 0===t&&(t=d.RGBA),void 0===e&&(e=this.texelType),r||(r=t);var a=d.createTexture(),i=new c.default(a,!0),u=n?f.default.NEAREST:this.magFilter,o=n?f.default.NEAREST:this.minFilter;return d.bindTexture(d.TEXTURE_2D,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,u),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,o),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this.wrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this.wrapT),d.texImage2D(d.TEXTURE_2D,0,t,this.width,this.height,0,r,e,null),d.bindTexture(d.TEXTURE_2D,null),i}},{key:"bind",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];t&&f.default.viewport(0,0,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];t&&f.default.viewport(0,0,f.default.width,f.default.height),d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"clear",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3];this.bind(),f.default.clear(t,e,r,n),this.unbind()}},{key:"getTexture",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this._textures[t]}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}},{key:"minFilter",value:function(t){return t!==d.LINEAR&&t!==d.NEAREST&&t!==d.LINEAR_MIPMAP_NEAREST?this:(this.minFilter=t,this)}},{key:"magFilter",value:function(t){return t!==d.LINEAR&&t!==d.NEAREST&&t!==d.LINEAR_MIPMAP_NEAREST?this:(this.magFilter=t,this)}},{key:"wrapS",value:function(t){return t!==d.CLAMP_TO_EDGE&&t!==d.REPEAT&&t!==d.MIRRORED_REPEAT?this:(this.wrapS=t,this)}},{key:"wrapT",value:function(t){return t!==d.CLAMP_TO_EDGE&&t!==d.REPEAT&&t!==d.MIRRORED_REPEAT?this:(this.wrapT=t,this)}}]),t}();e.default=m,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t){return 0!==t&&!(t&t-1)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=n(i),o=r(2),s=n(o),l=r(3),f=n(l),h=r(31),c=n(h),d=void 0,_=function(){function t(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,u.default)(this,t),d=f.default.gl,this.width=e,this.height=r,this.magFilter=n.magFilter||d.LINEAR,this.minFilter=n.minFilter||d.LINEAR,this.wrapS=n.wrapS||d.CLAMP_TO_EDGE,this.wrapT=n.wrapT||d.CLAMP_TO_EDGE,this.useDepth=n.useDepth||!0,this.useStencil=n.useStencil||!1,this.texelType=n.type,this._numSample=n.numSample||8,a(this.width)&&a(this.height)||(this.wrapS=this.wrapT=d.CLAMP_TO_EDGE,this.minFilter===d.LINEAR_MIPMAP_NEAREST&&(this.minFilter=d.LINEAR)),this._init()}return(0,s.default)(t,[{key:"_init",value:function(){var t=d.UNSIGNED_BYTE;this.texelType&&(t=this.texelType),this.texelType=t,this.frameBuffer=d.createFramebuffer(),this.frameBufferColor=d.createFramebuffer(),this.renderBufferColor=d.createRenderbuffer(),this.renderBufferDepth=d.createRenderbuffer(),this.glTexture=this._createTexture(),this.glDepthTexture=this._createTexture(d.DEPTH_COMPONENT16,d.UNSIGNED_SHORT,d.DEPTH_COMPONENT,!0),d.bindRenderbuffer(d.RENDERBUFFER,this.renderBufferColor),d.renderbufferStorageMultisample(d.RENDERBUFFER,this._numSample,d.RGBA8,this.width,this.height),d.bindRenderbuffer(d.RENDERBUFFER,this.renderBufferDepth),d.renderbufferStorageMultisample(d.RENDERBUFFER,this._numSample,d.DEPTH_COMPONENT16,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,this.renderBufferColor),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,this.renderBufferDepth),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBufferColor),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.glTexture.texture,0),d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"_createTexture",value:function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];void 0===t&&(t=d.RGBA),void 0===e&&(e=this.texelType),r||(r=t);var a=d.createTexture(),i=new c.default(a,!0),u=n?f.default.NEAREST:this.magFilter,o=n?f.default.NEAREST:this.minFilter;return d.bindTexture(d.TEXTURE_2D,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,u),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,o),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this.wrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this.wrapT),d.texImage2D(d.TEXTURE_2D,0,t,this.width,this.height,0,r,e,null),d.bindTexture(d.TEXTURE_2D,null),i}},{key:"bind",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];t&&f.default.viewport(0,0,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];t&&f.default.viewport(0,0,f.default.width,f.default.height);var e=this.width,r=this.height;d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindFramebuffer(d.READ_FRAMEBUFFER,this.frameBuffer),d.bindFramebuffer(d.DRAW_FRAMEBUFFER,this.frameBufferColor),d.clearBufferfv(d.COLOR,0,[0,0,0,0]),d.blitFramebuffer(0,0,e,r,0,0,e,r,d.COLOR_BUFFER_BIT,f.default.NEAREST),d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"getTexture",value:function(){arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.glTexture}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}}]),t}();e.default=_,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(7),h=n(f),c=r(15),d=n(c),_=void 0,v=function(){function t(e,r){(0,i.default)(this,t),_=l.default.gl,this._vs=e,this._fs=r,this._init()}return(0,o.default)(t,[{key:"_init",value:function(){this._meshCurrent=new d.default,this._meshTarget=new d.default,this._numPoints=-1,this._varyings=[],this.transformFeedback=_.createTransformFeedback()}},{key:"bufferData",value:function(t,e,r){var n=!!r;console.log("is Transform feedback ?",e,n),this._meshCurrent.bufferData(t,e,null,_.STREAM_COPY,!1),this._meshTarget.bufferData(t,e,null,_.STREAM_COPY,!1),n&&(this._varyings.push(r),this._numPoints<0&&(this._numPoints=t.length))}},{key:"bufferIndex",value:function(t){this._meshCurrent.bufferIndex(t),this._meshTarget.bufferIndex(t)}},{key:"uniform",value:function(t,e,r){this.shader&&this.shader.uniform(t,e,r)}},{key:"generate",value:function(){this.shader=new h.default(this._vs,this._fs,this._varyings)}},{key:"render",value:function(){this.shader||this.generate(),this.shader.bind(),l.default.drawTransformFeedback(this),this._swap()}},{key:"_swap",value:function(){var t=this._meshCurrent;this._meshCurrent=this._meshTarget,this._meshTarget=t}},{key:"numPoints",get:function(){return this._numPoints}},{key:"meshCurrent",get:function(){return this._meshCurrent}},{key:"meshTarget",get:function(){return this._meshTarget}},{key:"meshSource",get:function(){return this._meshCurrent}},{key:"meshDestination",get:function(){return this._meshTarget}}]),t}();e.default=v,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),_=r(33),v=n(_),p=r(8),M=n(p),m=M.default.vec3,x=[[m.fromValues(0,0,0),m.fromValues(1,0,0),m.fromValues(0,-1,0)],[m.fromValues(0,0,0),m.fromValues(-1,0,0),m.fromValues(0,-1,0)],[m.fromValues(0,0,0),m.fromValues(0,1,0),m.fromValues(0,0,1)],[m.fromValues(0,0,0),m.fromValues(0,-1,0),m.fromValues(0,0,-1)],[m.fromValues(0,0,0),m.fromValues(0,0,1),m.fromValues(0,-1,0)],[m.fromValues(0,0,0),m.fromValues(0,0,-1),m.fromValues(0,-1,0)]],E=function(t){function e(){(0,o.default)(this,e);var t=(0,h.default)(this,(0,i.default)(e).call(this));return t.setPerspective(Math.PI/2,1,.1,1e3),t}return(0,d.default)(e,t),(0,l.default)(e,[{key:"face",value:function(t){var e=x[t];this.lookAt(e[0],e[1],e[2])}}]),e}(v.default);e.default=E,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(3),d=n(c),_=r(15),v=n(_),p=r(7),M=n(p),m=r(9),x=n(m),E=r(158),T=r(157),g=function(t){function e(){(0,o.default)(this,e);var t=[],r=[],n=[0,1,2,3,4,5],a=9999;t.push([-a,0,0]),t.push([a,0,0]),t.push([0,-a,0]),t.push([0,a,0]),t.push([0,0,-a]),t.push([0,0,a]),r.push([1,0,0]),r.push([1,0,0]),r.push([0,1,0]),r.push([0,1,0]),r.push([0,0,1]),r.push([0,0,1]);var u=new v.default(d.default.LINES);u.bufferVertex(t),u.bufferIndex(n),u.bufferData(r,"aColor",3);var s=new M.default(E,T);return(0,l.default)(this,(0,i.default)(e).call(this,u,s))}return(0,h.default)(e,t),e}(x.default);e.default=g,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(19),M=n(p),m=r(7),x=n(m),E=r(9),T=n(E),g=r(75),b=r(30),S=function(t){function e(){(0,o.default)(this,e);var t=M.default.sphere(1,24),r=new x.default(g,b);return(0,h.default)(this,(0,i.default)(e).call(this,t,r))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(){var t=arguments.length<=0||void 0===arguments[0]?[0,0,0]:arguments[0],r=arguments.length<=1||void 0===arguments[1]?[1,1,1]:arguments[1],n=arguments.length<=2||void 0===arguments[2]?[1,1,1]:arguments[2],a=arguments.length<=3||void 0===arguments[3]?1:arguments[3];this.shader.bind(),this.shader.uniform("position","uniform3fv",t),this.shader.uniform("scale","uniform3fv",r),this.shader.uniform("color","uniform3fv",n),this.shader.uniform("opacity","uniform1f",a),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(T.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(19),M=n(p),m=r(7),x=n(m),E=r(9),T=n(E),g=r(52),b=r(53),S=function(t){function e(){(0,o.default)(this,e);var t=M.default.bigTriangle(),r=new x.default(g,b),n=(0,h.default)(this,(0,i.default)(e).call(this,t,r));return r.bind(),r.uniform("texture","uniform1i",0),n}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(T.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(3),M=n(p),m=r(15),x=n(m),E=r(7),T=n(E),g=r(9),b=n(g),S=r(160),I=r(30),y=function(t){function e(){(0,o.default)(this,e);var t=[],r=[],n=0,a=100,u=void 0,s=void 0;for(u=-a;a>u;u+=1)for(s=-a;a>s;s+=1)t.push([u,s,0]),r.push(n),n++,t.push([u,0,s]),r.push(n),n++;var l=new x.default(M.default.POINTS);l.bufferVertex(t),l.bufferIndex(r);var f=new T.default(S,I),c=(0,h.default)(this,(0,i.default)(e).call(this,l,f));return c.color=[1,1,1],c.opacity=.5,c}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(){this.shader.bind(),this.shader.uniform("color","uniform3fv",this.color),this.shader.uniform("opacity","uniform1f",this.opacity),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(b.default);e.default=y,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(3),M=n(p),m=r(19),x=n(m),E=r(7),T=n(E),g=r(9),b=n(g),S=r(52),I=r(161),y=function(t){function e(){(0,o.default)(this,e);var t=x.default.bigTriangle(),r=new T.default(S,I),n=(0,h.default)(this,(0,i.default)(e).call(this,t,r));return r.bind(),r.uniform("texture","uniform1i",0),n}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),this.shader.uniform("uResolution","vec2",[1/M.default.width,1/M.default.height]),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(b.default);e.default=y,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(3),M=n(p),m=r(15),x=n(m),E=r(7),T=n(E),g=r(9),b=n(g),S=r(51),I=r(30),y=function(t){function e(){(0,o.default)(this,e);var t=[],r=[0,1],n=[[0,0],[1,1]];t.push([0,0,0]),t.push([0,0,0]);var a=new x.default(M.default.LINES);a.bufferVertex(t),a.bufferTexCoord(n),a.bufferIndex(r);var u=new T.default(S,I);return(0,h.default)(this,(0,i.default)(e).call(this,a,u))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?[1,1,1]:arguments[2],a=arguments.length<=3||void 0===arguments[3]?1:arguments[3];this._mesh.bufferVertex([t,r]),this._shader.bind(),this._shader.uniform("color","vec3",n),this._shader.uniform("opacity","float",a),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(b.default);e.default=y,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{
value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(19),M=n(p),m=r(7),x=n(m),E=r(9),T=n(E),g=r(162),b=r(53),S=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?50:arguments[0],r=arguments.length<=1||void 0===arguments[1]?24:arguments[1];(0,o.default)(this,e);var n=M.default.sphere(t,r,!0),a=new x.default(g,b);return(0,h.default)(this,(0,i.default)(e).call(this,n,a))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(T.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(19),M=n(p),m=r(7),x=n(m),E=r(9),T=n(E),g=r(77),b=r(76),S=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0];(0,o.default)(this,e);var r=M.default.skybox(t),n=new x.default(g,b);return(0,h.default)(this,(0,i.default)(e).call(this,r,n))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(T.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(23),l=n(s),f=r(3),h=n(f),c=r(33),d=n(c),_=r(55),v=n(_),p=r(58),M=n(p),m=function(){function t(){var e=this;(0,i.default)(this,t),this._children=[],this._matrixIdentity=mat4.create(),h.default.enableAlphaBlending(),this._init(),this._initTextures(),this._initViews(),this._efIndex=l.default.addEF(function(){return e._loop()}),window.addEventListener("resize",function(){return e.resize()})}return(0,o.default)(t,[{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"stop",value:function(){-1!==this._efIndex&&(this._efIndex=l.default.removeEF(this._efIndex))}},{key:"start",value:function(){var t=this;-1===this._efIndex&&(this._efIndex=l.default.addEF(function(){return t._loop()}))}},{key:"resize",value:function(){h.default.setSize(window.innerWidth,window.innerHeight),this.camera.setAspectRatio(h.default.aspectRatio)}},{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return-1==e?void console.warn("Child no exist"):void this._children.splice(e,1)}},{key:"_initTextures",value:function(){}},{key:"_initViews",value:function(){}},{key:"_renderChildren",value:function(){for(var t=void 0,e=0;e<this._children.length;e++)t=this._children[e],t.toRender();h.default.rotate(this._matrixIdentity)}},{key:"_init",value:function(){this.camera=new d.default,this.camera.setPerspective(45*Math.PI/180,h.default.aspectRatio,.1,100),this.orbitalControl=new M.default(this.camera,window,15),this.orbitalControl.radius.value=10,this.cameraOrtho=new v.default}},{key:"_loop",value:function(){h.default.viewport(0,0,h.default.width,h.default.height),h.default.setMatrices(this.camera),this.update(),this._renderChildren(),this.render()}}]),t}();e.default=m,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={},n=function(t){return t.length?"vec"+t.length:"float"};r.addUniforms=function(t,e){var r="";for(var a in e){var i=e[a],u=n(i);r+="uniform "+u+" "+a+";\n"}return t=t.replace("{{UNIFORMS}}",r)},r.bindUniforms=function(t,e){for(var r in e){var a=e[r],i=n(a);t.uniform(r,i,a)}},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(7),l=n(s),f=function(){function t(e,r){(0,i.default)(this,t),this.shader=new l.default(e,r),this._init()}return(0,o.default)(t,[{key:"_init",value:function(){}},{key:"render",value:function(){}}]),t}();e.default=f,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),_=r(57),v=n(_),p=r(7),M=n(p),m=r(3),x=n(m),E=function(t){function e(t,r){(0,o.default)(this,e);var n=(0,h.default)(this,(0,i.default)(e).call(this));return n._children=[],n.shader=new M.default(t,r),n._init(),n._matrixTemp=mat4.create(),n}return(0,d.default)(e,t),(0,l.default)(e,[{key:"_init",value:function(){}},{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return-1==e?void console.warn("Child no exist"):void this._children.splice(e,1)}},{key:"toRender",value:function(t){void 0===t&&(t=mat4.create()),mat4.mul(this._matrixTemp,t,this.matrix),x.default.rotate(this._matrixTemp),this.render();for(var e=0;e<this._children.length;e++){var r=this._children[e];r.toRender(this.matrix)}}},{key:"render",value:function(){}}]),e}(v.default);e.default=E,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),_=r(34),v=n(_),p=r(100),M=n(p),m=function(t){function e(){return(0,o.default)(this,e),(0,h.default)(this,(0,i.default)(e).call(this,!0))}return(0,d.default)(e,t),(0,l.default)(e,[{key:"parse",value:function(t){return(0,M.default)(t)}},{key:"_onLoaded",value:function(){var t=this.parse(this._req.response);this._callback&&this._callback(t)}}]),e}(v.default);m.parse=function(t){return(0,M.default)(t)},e.default=m,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(12),d=n(c),_=r(5),v=n(_),p=r(34),M=n(p),m=r(15),x=n(m),E=function(t){function e(){return(0,o.default)(this,e),(0,h.default)(this,(0,i.default)(e).apply(this,arguments))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"load",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?4:arguments[2];this._drawType=n,(0,d.default)((0,i.default)(e.prototype),"load",this).call(this,t,r)}},{key:"_onLoaded",value:function(){this.parseObj(this._req.response)}},{key:"parseObj",value:function(t){function e(t){var e=parseInt(t);return 3*(e>=0?e-1:e+c.length/3)}function r(t){var e=parseInt(t);return 3*(e>=0?e-1:e+d.length/3)}function n(t){var e=parseInt(t);return 2*(e>=0?e-1:e+_.length/2)}function a(t,e,r){l.push([c[t],c[t+1],c[t+2]]),l.push([c[e],c[e+1],c[e+2]]),l.push([c[r],c[r+1],c[r+2]]),v.push(3*p+0),v.push(3*p+1),v.push(3*p+2),p++}function i(t,e,r){f.push([_[t],_[t+1]]),f.push([_[e],_[e+1]]),f.push([_[r],_[r+1]])}function u(t,e,r){h.push([d[t],d[t+1],d[t+2]]),h.push([d[e],d[e+1],d[e+2]]),h.push([d[r],d[r+1],d[r+2]])}function o(t,o,s,l,f,h,c,d,_,v,p,M){var m=e(t),x=e(o),E=e(s),T=void 0;void 0===l?a(m,x,E):(T=e(l),a(m,x,T),a(x,E,T)),void 0!==f&&(m=n(f),x=n(h),E=n(c),void 0===l?i(m,x,E):(T=n(d),i(m,x,T),i(x,E,T))),void 0!==_&&(m=r(_),x=r(v),E=r(p),void 0===l?u(m,x,E):(T=r(M),u(m,x,T),u(x,E,T)))}for(var s=t.split("\n"),l=[],f=[],h=[],c=[],d=[],_=[],v=[],p=0,M=void 0,m=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,x=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,E=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,T=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,g=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,b=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,S=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,I=0;I<s.length;I++){var y=s[I];y=y.trim(),0!==y.length&&"#"!==y.charAt(0)&&(null!==(M=m.exec(y))?c.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])):null!==(M=x.exec(y))?d.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])):null!==(M=E.exec(y))?_.push(parseFloat(M[1]),parseFloat(M[2])):null!==(M=T.exec(y))?o(M[1],M[2],M[3],M[4]):null!==(M=g.exec(y))?o(M[2],M[5],M[8],M[11],M[3],M[6],M[9],M[12]):null!==(M=b.exec(y))?o(M[2],M[6],M[10],M[14],M[3],M[7],M[11],M[15],M[4],M[8],M[12],M[16]):null!==(M=S.exec(y))&&o(M[2],M[5],M[8],M[11],void 0,void 0,void 0,void 0,M[3],M[6],M[9],M[12]))}return this._generateMeshes({positions:l,coords:f,normals:h,indices:v})}},{key:"_generateMeshes",value:function(t){var e=65535,r=t.normals.length>0,n=t.coords.length>0,a=void 0;if(t.positions.length>e){var i=[],u=0,o={};for(o.positions=t.positions.concat(),o.coords=t.coords.concat(),o.indices=t.indices.concat(),o.normals=t.normals.concat();t.indices.length>0;){for(var s=Math.min(e,t.positions.length),l=t.indices.splice(0,s),f=[],h=[],c=[],d=void 0,_=0,v=0;v<l.length;v++)l[v]>_&&(_=l[v]),d=l[v],f.push(o.positions[d]),n&&h.push(o.coords[d]),r&&c.push(o.normals[d]),l[v]-=u;u=_+1,a=new x.default(this._drawType),a.bufferVertex(f),n&&a.bufferTexCoord(h),a.bufferIndex(l),r&&a.bufferNormal(c),i.push(a)}return this._callback&&this._callback(i,o),i}return a=new x.default(this._drawType),a.bufferVertex(t.positions),n&&a.bufferTexCoord(t.coords),a.bufferIndex(t.indices),r&&a.bufferNormal(t.normals),this._callback&&this._callback(a,t),a}}]),e}(M.default);E.parse=function(t){var e=new E;return e.parseObj(t)},e.default=E,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=!0;try{var l=document.createEvent("CustomEvent");l=null}catch(f){s=!1}var h=function(){function t(){(0,i.default)(this,t),this._eventListeners={}}return(0,o.default)(t,[{key:"addEventListener",value:function(t,e){return null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={}),this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),this}},{key:"on",value:function(t,e){return this.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var r=this._eventListeners[t];if("undefined"==typeof r)return this;for(var n=r.length,a=0;n>a;a++)r[a]===e&&(r.splice(a,1),a--,n--);return this}},{key:"off",value:function(t,e){return this.removeEventListener(t,e)}},{key:"dispatchEvent",value:function(t){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var e=t.type;try{null===t.target&&(t.target=this),t.currentTarget=this}catch(r){var n={type:e,detail:t.detail,dispatcher:this};return this.dispatchEvent(n)}var a=this._eventListeners[e];if(null!==a&&void 0!==a)for(var i=this._copyArray(a),u=i.length,o=0;u>o;o++){var s=i[o];s.call(this,t)}return this}},{key:"dispatchCustomEvent",value:function(t,e){var r=void 0;return s?(r=document.createEvent("CustomEvent"),r.dispatcher=this,r.initCustomEvent(t,!1,!1,e)):r={type:t,detail:e,dispatcher:this},this.dispatchEvent(r)}},{key:"trigger",value:function(t,e){return this.dispatchCustomEvent(t,e)}},{key:"_destroy",value:function(){if(null!==this._eventListeners){for(var t in this._eventListeners)if(this._eventListeners.hasOwnProperty(t)){for(var e=this._eventListeners[t],r=e.length,n=0;r>n;n++)e[n]=null;delete this._eventListeners[t]}this._eventListeners=null}}},{key:"_copyArray",value:function(t){for(var e=new Array(t.length),r=e.length,n=0;r>n;n++)e[n]=t[n];return e}}]),t}();e.default=h,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","OES_vertex_array_object","ANGLE_instanced_arrays","WEBGL_draw_buffers"],t.exports=e.default},function(t,e){"use strict";function r(t,e,r,n,a,i){function u(e){var r=0;do e[r++]=t[n];while(++n<v&&r<e.length);return r}function o(e,r,a){var i=0;do e[r+i++]=t[n];while(++n<v&&a>i);return i}function s(t,e,r,n){var a=4*n,i=o(e,r,a);if(a>i)throw new Error("Error reading raw pixels: got "+i+" bytes, expected "+a)}for(var l=new Array(4),f=null,h=void 0,c=void 0,d=void 0,_=new Array(2),v=t.length;i>0;){if(u(l)<l.length)throw new Error("Error reading bytes: expected "+l.length);if(2!==l[0]||2!==l[1]||0!==(128&l[2]))return e[r++]=l[0],e[r++]=l[1],e[r++]=l[2],e[r++]=l[3],void s(t,e,r,a*i-1);if(((255&l[2])<<8|255&l[3])!==a)throw new Error("Wrong scanline width "+((255&l[2])<<8|255&l[3])+", expected "+a);null===f&&(f=new Array(4*a)),h=0;for(var p=0;4>p;p++)for(c=(p+1)*a;c>h;){if(u(_)<_.length)throw new Error("Error reading 2-byte buffer");if((255&_[0])>128){if(d=(255&_[0])-128,0===d||d>c-h)throw new Error("Bad scanline data");for(;d-- >0;)f[h++]=_[1]}else{if(d=255&_[0],0===d||d>c-h)throw new Error("Bad scanline data");if(f[h++]=_[1],--d>0){if(o(f,h,d)<d)throw new Error("Error reading non-run data");h+=d}}}for(var M=0;a>M;M++)e[r+0]=f[M],e[r+1]=f[M+a],e[r+2]=f[M+2*a],e[r+3]=f[M+3*a],r+=4;i--}}function n(t){function e(){var e="";do{var r=t[n];if(r===f){++n;break}e+=String.fromCharCode(r)}while(++n<l);return e}t instanceof ArrayBuffer&&(t=new Uint8Array(t));for(var n=0,l=t.length,f=10,h=0,c=0,d=1,_=1,v=!1,p=0;20>p;p++){var M=e(),m=void 0;if(m=M.match(a));else if(m=M.match(o))v=!0;else if(m=M.match(u))d=Number(m[1]);else if(m=M.match(i));else if(m=M.match(s)){c=Number(m[1]),h=Number(m[2]);break}}if(!v)throw new Error("File is not run length encoded!");var x=new Uint8Array(h*c*4),E=h,T=c;r(t,x,0,n,E,T);for(var g=new Float32Array(h*c*4),b=0;b<x.length;b+=4){var S=x[b+0]/255,I=x[b+1]/255,y=x[b+2]/255,F=x[b+3],R=Math.pow(2,F-128);S*=R,I*=R,y*=R;var A=b;g[A+0]=S,g[A+1]=I,g[A+2]=y,g[A+3]=1}return{shape:[h,c],exposure:d,gamma:_,data:g}}Object.defineProperty(e,"__esModule",{value:!0});var a="#\\?RADIANCE",i="#.*",u="EXPOSURE=\\s*([0-9]*[.][0-9]*)",o="FORMAT=32-bit_rle_rgbe",s="-Y ([0-9]+) \\+X ([0-9]+)";e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=r(35),h=n(f),c=r(23),d=n(c),_=function(t,e){var r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r},v=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?window:arguments[1],a=arguments.length<=2||void 0===arguments[2]?.1:arguments[2];(0,i.default)(this,t),this._target=e,this._listenerTarget=n,this.matrix=l.default.mat4.create(),this.m=l.default.mat4.create(),this._vZaxis=l.default.vec3.clone([0,0,0]),this._zAxis=l.default.vec3.clone([0,0,1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=l.default.quat.create(),this.tempRotation=l.default.quat.create(),this._rotateZMargin=0,this._offset=.004,this._slerp=-1,this._isLocked=!1,this._diffX=new h.default(0,a),this._diffY=new h.default(0,a),this._listenerTarget.addEventListener("mousedown",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("touchstart",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("mousemove",function(t){return r._onMove(t)}),this._listenerTarget.addEventListener("touchmove",function(t){return r._onMove(t)}),window.addEventListener("touchend",function(){return r._onUp()}),window.addEventListener("mouseup",function(){return r._onUp()}),d.default.addEF(function(){return r._loop()})}return(0,o.default)(t,[{key:"inverseControl",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._isInvert=t}},{key:"lock",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._isLocked=t}},{key:"setCameraPos",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?.1:arguments[1];if(this.easing=e,!(this._slerp>0)){var r=l.default.quat.clone(this._rotation);this._updateRotation(r),this._rotation=l.default.quat.clone(r),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=l.default.quat.clone(t),this._slerp=1}}},{key:"resetQuat",value:function(){this._rotation=l.default.quat.clone([0,0,1,0]),this.tempRotation=l.default.quat.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1}},{key:"_onDown",value:function(t){if(!this._isLocked){var e=_(t),r=l.default.quat.clone(this._rotation);this._updateRotation(r),this._rotation=r,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._diffX.setTo(0),this._diffY.setTo(0)}}},{key:"_onMove",value:function(t){this._isLocked||_(t,this.mouse)}},{key:"_onUp",value:function(){this._isLocked||(this._isMouseDown=!1)}},{key:"_updateRotation",value:function(t){this._isMouseDown&&!this._isLocked&&(this._diffX.value=-(this.mouse.x-this.preMouse.x),this._diffY.value=this.mouse.y-this.preMouse.y,this._isInvert&&(this._diffX.value=-this._diffX.targetValue,this._diffY.value=-this._diffY.targetValue));var e=void 0,r=void 0;if(this._isRotateZ>0)1===this._isRotateZ?(e=-this._diffX.value*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,r=l.default.quat.clone([0,0,Math.sin(e),Math.cos(e)]),l.default.quat.multiply(r,t,r)):(e=-this._diffY.value*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,r=l.default.quat.clone([0,0,Math.sin(e),Math.cos(e)]),l.default.quat.multiply(r,t,r));else{var n=l.default.vec3.clone([this._diffX.value,this._diffY.value,0]),a=l.default.vec3.create();l.default.vec3.cross(a,n,this._zAxis),l.default.vec3.normalize(a,a),e=l.default.vec3.length(n)*this._offset,r=l.default.quat.clone([Math.sin(e)*a[0],Math.sin(e)*a[1],Math.sin(e)*a[2],Math.cos(e)]),l.default.quat.multiply(t,r,t)}}},{key:"_loop",value:function(){l.default.mat4.identity(this.m),void 0===this._targetQuat?(l.default.quat.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<5e-4?(l.default.quat.copy(this._rotation,this._targetQuat),l.default.quat.copy(this.tempRotation,this._targetQuat),this._targetQuat=void 0,this._diffX.setTo(0),this._diffY.setTo(0),this._slerp=-1):(l.default.quat.set(this.tempRotation,0,0,0,0),l.default.quat.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),l.default.vec3.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),l.default.mat4.fromQuat(this.matrix,this.tempRotation)}},{key:"easing",set:function(t){this._diffX.easing=t,this._diffY.easing=t},get:function(){return this._diffX.easing}}]),t}();e.default=v,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(30),i=n(a),u=r(52),o=n(u),s=r(75),l=n(s),f=r(53),h=n(f),c=r(51),d=n(c),_=r(77),v=n(_),p=r(76),M=n(p),m={simpleColorFrag:i.default,bigTriangleVert:o.default,generalVert:l.default,copyFrag:h.default,basicVert:d.default,skyboxVert:v.default,skyboxFrag:M.default};e.default=m,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t){switch(t){default:case"linear":return h.Linear.None;case"expIn":return h.Exponential.In;case"expOut":return h.Exponential.Out;case"expInOut":return h.Exponential.InOut;case"cubicIn":return h.Cubic.In;case"cubicOut":return h.Cubic.Out;case"cubicInOut":return h.Cubic.InOut;case"quarticIn":return h.Quartic.In;case"quarticOut":return h.Quartic.Out;case"quarticInOut":return h.Quartic.InOut;case"quinticIn":return h.Quintic.In;case"quinticOut":return h.Quintic.Out;case"quinticInOut":return h.Quintic.InOut;case"sinusoidalIn":return h.Sinusoidal.In;case"sinusoidalOut":return h.Sinusoidal.Out;case"sinusoidalInOut":return h.Sinusoidal.InOut;case"circularIn":return h.Circular.In;case"circularOut":return h.Circular.Out;case"circularInOut":return h.Circular.InOut;case"elasticIn":return h.Elastic.In;case"elasticOut":return h.Elastic.Out;case"elasticInOut":return h.Elastic.InOut;case"backIn":return h.Back.In;case"backOut":return h.Back.Out;case"backInOut":return h.Back.InOut;case"bounceIn":return h.Bounce.in;case"bounceOut":return h.Bounce.out;case"bounceInOut":return h.Bounce.inOut}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=n(i),o=r(2),s=n(o),l=r(23),f=n(l),h={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e=void 0,r=.1,n=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=n/4):e=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)))},Out:function(t){var e=void 0,r=.1,n=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=n/4):e=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},InOut:function(t){var e=void 0,r=.1,n=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=n/4):e=n*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)):r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{"in":function(t){return 1-h.Bounce.out(1-t)},out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOut:function(t){return.5>t?.5*h.Bounce.in(2*t):.5*h.Bounce.out(2*t-1)+.5}}},c=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?"expOut":arguments[1],a=arguments.length<=2||void 0===arguments[2]?.01:arguments[2];(0,u.default)(this,t),this._value=e,this._startValue=e,this._targetValue=e,this._counter=1,this.speed=a,this.easing=n,this._needUpdate=!0,this._efIndex=f.default.addEF(function(){return r._update()})}return(0,s.default)(t,[{key:"_update",value:function(){var t=this._counter+this.speed;return t>1&&(t=1),this._counter===t?void(this._needUpdate=!1):(this._counter=t,void(this._needUpdate=!0))}},{key:"limit",value:function(t,e){return t>e?void this.limit(e,t):(this._min=t,this._max=e,void this._checkLimit())}},{key:"setTo",value:function(t){this._value=t,this._targetValue=t,this._counter=1}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){f.default.removeEF(this._efIndex)}},{key:"value",set:function(t){this._startValue=this._value,this._targetValue=t,this._checkLimit(),this._counter=0},get:function(){if(this._needUpdate){var t=a(this.easing),e=t(this._counter);this._value=this._startValue+e*(this._targetValue-this._startValue),this._needUpdate=!1}return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),t}();e.default=c,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(3),i=n(a),u=function(){i.default.VERTEX_SHADER=i.default.gl.VERTEX_SHADER,i.default.FRAGMENT_SHADER=i.default.gl.FRAGMENT_SHADER,i.default.COMPILE_STATUS=i.default.gl.COMPILE_STATUS,i.default.DEPTH_TEST=i.default.gl.DEPTH_TEST,i.default.CULL_FACE=i.default.gl.CULL_FACE,i.default.BLEND=i.default.gl.BLEND,i.default.POINTS=i.default.gl.POINTS,i.default.LINES=i.default.gl.LINES,i.default.TRIANGLES=i.default.gl.TRIANGLES,i.default.LINEAR=i.default.gl.LINEAR,i.default.NEAREST=i.default.gl.NEAREST,i.default.LINEAR_MIPMAP_NEAREST=i.default.gl.LINEAR_MIPMAP_NEAREST,i.default.NEAREST_MIPMAP_LINEAR=i.default.gl.NEAREST_MIPMAP_LINEAR,i.default.LINEAR_MIPMAP_LINEAR=i.default.gl.LINEAR_MIPMAP_LINEAR,i.default.NEAREST_MIPMAP_NEAREST=i.default.gl.NEAREST_MIPMAP_NEAREST,i.default.MIRRORED_REPEAT=i.default.gl.MIRRORED_REPEAT,i.default.CLAMP_TO_EDGE=i.default.gl.CLAMP_TO_EDGE,i.default.SCISSOR_TEST=i.default.gl.SCISSOR_TEST,i.default.UNSIGNED_BYTE=i.default.gl.UNSIGNED_BYTE};e.default=u,t.exports=e.default},function(t,e){"use strict";function r(t,e){var r=t.getExtension(e);if(!r)return!1;var n=e.split("_")[0],a=new RegExp(n+"$");for(var i in r){var u=r[i];if("function"==typeof u){var o=i.replace(a,"");i.substring&&(t[o]=r[i].bind(r))}}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(){if(u.default.webgl2)return u.default.gl.FLOAT;var t=u.default.getExtension("OES_texture_float");return t?u.default.gl.FLOAT:(console.warn("USING FLOAT BUT OES_texture_float NOT SUPPORTED"),u.default.gl.UNSIGNED_BYTE)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return o||(s=a()),s};var i=r(3),u=n(i),o=!1,s=void 0;t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(){if(u.default.webgl2)return u.default.gl.HALF_FLOAT;var t=u.default.getExtension("OES_texture_half_float");return t?t.HALF_FLOAT_OES:(console.warn("USING HALF FLOAT BUT OES_texture_half_float NOT SUPPORTED"),u.default.gl.UNSIGNED_BYTE)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return o||(s=a()),s};var i=r(3),u=n(i),o=!1,s=void 0;t.exports=e.default},function(t,e,r){t.exports={"default":r(114),__esModule:!0}},function(t,e,r){t.exports={"default":r(115),__esModule:!0}},function(t,e,r){t.exports={"default":r(116),__esModule:!0}},function(t,e,r){t.exports={"default":r(118),__esModule:!0}},function(t,e,r){t.exports={"default":r(119),__esModule:!0}},function(t,e,r){t.exports={"default":r(120),__esModule:!0}},function(t,e,r){r(139);var n=r(10).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(140);var n=r(10).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){r(141);var n=r(10).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,r){r(142),t.exports=r(10).Object.getPrototypeOf},function(t,e,r){r(143),t.exports=r(10).Object.setPrototypeOf},function(t,e,r){r(146),r(144),r(147),r(148),t.exports=r(10).Symbol},function(t,e,r){r(145),r(149),t.exports=r(50).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(14),a=r(137),i=r(136);t.exports=function(t){return function(e,r,u){var o,s=n(e),l=a(s.length),f=i(u,l);if(t&&r!=r){for(;l>f;)if(o=s[f++],o!=o)return!0}else for(;l>f;f++)if((t||f in s)&&s[f]===r)return t||f||0;return!t&&-1}}},function(t,e,r){var n=r(27),a=r(66),i=r(43);t.exports=function(t){var e=n(t),r=a.f;if(r)for(var u,o=r(t),s=i.f,l=0;o.length>l;)s.call(t,u=o[l++])&&e.push(u);return e}},function(t,e,r){t.exports=r(13).document&&document.documentElement},function(t,e,r){var n=r(60);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(60);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(41),a=r(28),i=r(44),u={};r(21)(u,r(22)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(u,{next:a(1,r)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(27),a=r(14);t.exports=function(t,e){for(var r,i=a(t),u=n(i),o=u.length,s=0;o>s;)if(i[r=u[s++]]===e)return r}},function(t,e,r){var n=r(29)("meta"),a=r(26),i=r(17),u=r(18).f,o=0,s=Object.isExtensible||function(){return!0},l=!r(25)(function(){return s(Object.preventExtensions({}))}),f=function(t){u(t,n,{value:{i:"O"+ ++o,w:{}}})},h=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[n].i},c=function(t,e){if(!i(t,n)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[n].w},d=function(t){return l&&_.NEED&&s(t)&&!i(t,n)&&f(t),t},_=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:c,onFreeze:d}},function(t,e,r){var n=r(18),a=r(24),i=r(27);t.exports=r(16)?Object.defineProperties:function(t,e){a(t);for(var r,u=i(e),o=u.length,s=0;o>s;)n.f(t,r=u[s++],e[r]);return t}},function(t,e,r){var n=r(14),a=r(65).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return a(t)}catch(e){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?o(t):a(n(t))}},function(t,e,r){var n=r(26),a=r(24),i=function(t,e){if(a(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(61)(Function.call,r(42).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,r){return i(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:i}},function(t,e,r){var n=r(47),a=r(37);t.exports=function(t){return function(e,r){var i,u,o=String(a(e)),s=n(r),l=o.length;return 0>s||s>=l?t?"":void 0:(i=o.charCodeAt(s),55296>i||i>56319||s+1===l||(u=o.charCodeAt(s+1))<56320||u>57343?t?o.charAt(s):i:t?o.slice(s,s+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,e,r){var n=r(47),a=Math.max,i=Math.min;t.exports=function(t,e){return t=n(t),0>t?a(t+e,0):i(t,e)}},function(t,e,r){var n=r(47),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},function(t,e,r){"use strict";var n=r(122),a=r(129),i=r(39),u=r(14);t.exports=r(64)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,r):"values"==e?a(0,t[r]):a(0,[r,t[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(20);n(n.S,"Object",{create:r(41)})},function(t,e,r){var n=r(20);n(n.S+n.F*!r(16),"Object",{defineProperty:r(18).f})},function(t,e,r){var n=r(14),a=r(42).f;r(69)("getOwnPropertyDescriptor",function(){return function(t,e){return a(n(t),e)}})},function(t,e,r){var n=r(71),a=r(67);r(69)("getPrototypeOf",function(){return function(t){return a(n(t))}})},function(t,e,r){var n=r(20);n(n.S,"Object",{setPrototypeOf:r(134).set})},function(t,e){},function(t,e,r){"use strict";var n=r(135)(!0);r(64)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){
"use strict";var n=r(13),a=r(17),i=r(16),u=r(20),o=r(70),s=r(131).KEY,l=r(25),f=r(46),h=r(44),c=r(29),d=r(22),_=r(50),v=r(49),p=r(130),M=r(124),m=r(127),x=r(24),E=r(14),T=r(48),g=r(28),b=r(41),S=r(133),I=r(42),y=r(18),F=r(27),R=I.f,A=y.f,D=S.f,w=n.Symbol,P=n.JSON,O=P&&P.stringify,N="prototype",L=d("_hidden"),k=d("toPrimitive"),U={}.propertyIsEnumerable,C=f("symbol-registry"),B=f("symbols"),X=f("op-symbols"),V=Object[N],z="function"==typeof w,j=n.QObject,G=!j||!j[N]||!j[N].findChild,Y=i&&l(function(){return 7!=b(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=R(V,e);n&&delete V[e],A(t,e,r),n&&t!==V&&A(V,e,n)}:A,q=function(t){var e=B[t]=b(w[N]);return e._k=t,e},W=z&&"symbol"==typeof w.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof w},H=function(t,e,r){return t===V&&H(X,e,r),x(t),e=T(e,!0),x(r),a(B,e)?(r.enumerable?(a(t,L)&&t[L][e]&&(t[L][e]=!1),r=b(r,{enumerable:g(0,!1)})):(a(t,L)||A(t,L,g(1,{})),t[L][e]=!0),Y(t,e,r)):A(t,e,r)},Z=function(t,e){x(t);for(var r,n=M(e=E(e)),a=0,i=n.length;i>a;)H(t,r=n[a++],e[r]);return t},Q=function(t,e){return void 0===e?b(t):Z(b(t),e)},K=function(t){var e=U.call(this,t=T(t,!0));return this===V&&a(B,t)&&!a(X,t)?!1:e||!a(this,t)||!a(B,t)||a(this,L)&&this[L][t]?e:!0},J=function(t,e){if(t=E(t),e=T(e,!0),t!==V||!a(B,e)||a(X,e)){var r=R(t,e);return!r||!a(B,e)||a(t,L)&&t[L][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=D(E(t)),n=[],i=0;r.length>i;)a(B,e=r[i++])||e==L||e==s||n.push(e);return n},tt=function(t){for(var e,r=t===V,n=D(r?X:E(t)),i=[],u=0;n.length>u;)a(B,e=n[u++])&&(r?a(V,e):!0)&&i.push(B[e]);return i};z||(w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(r){this===V&&e.call(X,r),a(this,L)&&a(this[L],t)&&(this[L][t]=!1),Y(this,t,g(1,r))};return i&&G&&Y(V,t,{configurable:!0,set:e}),q(t)},o(w[N],"toString",function(){return this._k}),I.f=J,y.f=H,r(65).f=S.f=$,r(43).f=K,r(66).f=tt,i&&!r(40)&&o(V,"propertyIsEnumerable",K,!0),_.f=function(t){return q(d(t))}),u(u.G+u.W+u.F*!z,{Symbol:w});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)d(et[rt++]);for(var et=F(d.store),rt=0;et.length>rt;)v(et[rt++]);u(u.S+u.F*!z,"Symbol",{"for":function(t){return a(C,t+="")?C[t]:C[t]=w(t)},keyFor:function(t){if(W(t))return p(C,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),u(u.S+u.F*!z,"Object",{create:Q,defineProperty:H,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:tt}),P&&u(u.S+u.F*(!z||l(function(){var t=w();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,r,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);return e=n[1],"function"==typeof e&&(r=e),!r&&m(e)||(e=function(t,e){return r&&(e=r.call(this,t,e)),W(e)?void 0:e}),n[1]=e,O.apply(P,n)}}}),w[N][k]||r(21)(w[N],k,w[N].valueOf),h(w,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,r){r(49)("asyncIterator")},function(t,e,r){r(49)("observable")},function(t,e,r){r(138);for(var n=r(13),a=r(21),i=r(39),u=r(22)("toStringTag"),o=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;5>s;s++){var l=o[s],f=n[l],h=f&&f.prototype;h&&!h[u]&&a(h,u,l),i[l]=i.Array}},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,r,a){var i=new n.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=a,i},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r*i-a*n;return u?(u=1/u,t[0]=i*u,t[1]=-n*u,t[2]=-a*u,t[3]=r*u,t):null},a.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=r[0],s=r[1],l=r[2],f=r[3];return t[0]=n*o+i*s,t[1]=a*o+u*s,t[2]=n*l+i*f,t[3]=a*l+u*f,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*o,t[1]=a*s+u*o,t[2]=n*-o+i*s,t[3]=a*-o+u*s,t},a.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=r[0],s=r[1];return t[0]=n*o,t[1]=a*o,t[2]=i*s,t[3]=u*s,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-f)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))},a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},t.exports=a},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,r,a,i,u){var o=new n.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=a,o[4]=i,o[5]=u,o},a.set=function(t,e,r,n,a,i,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=r*i-n*a;return s?(s=1/s,t[0]=i*s,t[1]=-n*s,t[2]=-a*s,t[3]=r*s,t[4]=(a*o-i*u)*s,t[5]=(n*u-r*o)*s,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=r[0],f=r[1],h=r[2],c=r[3],d=r[4],_=r[5];return t[0]=n*l+i*f,t[1]=a*l+u*f,t[2]=n*h+i*c,t[3]=a*h+u*c,t[4]=n*d+i*_+o,t[5]=a*d+u*_+s,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=Math.sin(r),f=Math.cos(r);return t[0]=n*f+i*l,t[1]=a*f+u*l,t[2]=n*-l+i*f,t[3]=a*-l+u*f,t[4]=o,t[5]=s,t},a.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=r[0],f=r[1];return t[0]=n*l,t[1]=a*l,t[2]=i*f,t[3]=u*f,t[4]=o,t[5]=s,t},a.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=n*l+i*f+o,t[5]=a*l+u*f+s,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],l=e[0],f=e[1],h=e[2],c=e[3],d=e[4],_=e[5];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-c)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(o-d)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-_)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))},t.exports=a},function(t,e,r){var n=r(11),a={scalar:{},SIMD:{}};a.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,r,a,i,u,o,s,l,f,h,c,d,_,v,p){var M=new n.ARRAY_TYPE(16);return M[0]=t,M[1]=e,M[2]=r,M[3]=a,M[4]=i,M[5]=u,M[6]=o,M[7]=s,M[8]=l,M[9]=f,M[10]=h,M[11]=c,M[12]=d,M[13]=_,M[14]=v,M[15]=p,M},a.set=function(t,e,r,n,a,i,u,o,s,l,f,h,c,d,_,v,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=l,t[9]=f,t[10]=h,t[11]=c,t[12]=d,t[13]=_,t[14]=v,t[15]=p,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],i=e[6],u=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=u,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var r,n,a,i,u,o,s,l,f,h;return r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.shuffle(r,n,0,1,4,5),o=SIMD.Float32x4.shuffle(a,i,0,1,4,5),s=SIMD.Float32x4.shuffle(u,o,0,2,4,6),l=SIMD.Float32x4.shuffle(u,o,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),u=SIMD.Float32x4.shuffle(r,n,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,2,3,6,7),f=SIMD.Float32x4.shuffle(u,o,0,2,4,6),h=SIMD.Float32x4.shuffle(u,o,1,3,5,7),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,h),t},a.transpose=n.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=e[9],c=e[10],d=e[11],_=e[12],v=e[13],p=e[14],M=e[15],m=r*o-n*u,x=r*s-a*u,E=r*l-i*u,T=n*s-a*o,g=n*l-i*o,b=a*l-i*s,S=f*v-h*_,I=f*p-c*_,y=f*M-d*_,F=h*p-c*v,R=h*M-d*v,A=c*M-d*p,D=m*A-x*R+E*F+T*y-g*I+b*S;return D?(D=1/D,t[0]=(o*A-s*R+l*F)*D,t[1]=(a*R-n*A-i*F)*D,t[2]=(v*b-p*g+M*T)*D,t[3]=(c*g-h*b-d*T)*D,t[4]=(s*y-u*A-l*I)*D,t[5]=(r*A-a*y+i*I)*D,t[6]=(p*E-_*b-M*x)*D,t[7]=(f*b-c*E+d*x)*D,t[8]=(u*R-o*y+l*S)*D,t[9]=(n*y-r*R-i*S)*D,t[10]=(_*g-v*E+M*m)*D,t[11]=(h*E-f*g-d*m)*D,t[12]=(o*I-u*F-s*S)*D,t[13]=(r*F-n*I+a*S)*D,t[14]=(v*x-_*T-p*m)*D,t[15]=(f*T-h*x+c*m)*D,t):null},a.SIMD.invert=function(t,e){var r,n,a,i,u,o,s,l,f,h,c=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),_=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return u=SIMD.Float32x4.shuffle(c,d,0,1,4,5),n=SIMD.Float32x4.shuffle(_,v,0,1,4,5),r=SIMD.Float32x4.shuffle(u,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,u,1,3,5,7),u=SIMD.Float32x4.shuffle(c,d,2,3,6,7),i=SIMD.Float32x4.shuffle(_,v,2,3,6,7),a=SIMD.Float32x4.shuffle(u,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,u,1,3,5,7),u=SIMD.Float32x4.mul(a,i),u=SIMD.Float32x4.swizzle(u,1,0,3,2),o=SIMD.Float32x4.mul(n,u),s=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),o),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.mul(n,a),u=SIMD.Float32x4.swizzle(u,1,0,3,2),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,u),o),f=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,u)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),i),u=SIMD.Float32x4.swizzle(u,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,u),o),l=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(a,u)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.mul(r,n),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,u),l),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,u),f),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,u),l),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,u)),u=SIMD.Float32x4.mul(r,i),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,u)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),l),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,u),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,u)),u=SIMD.Float32x4.mul(r,a),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,u),s),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(n,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,u)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),f),h=SIMD.Float32x4.mul(r,o),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),u=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(u,u),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(u,u))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,o)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,f)),t):null},a.invert=n.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=e[9],c=e[10],d=e[11],_=e[12],v=e[13],p=e[14],M=e[15];return t[0]=o*(c*M-d*p)-h*(s*M-l*p)+v*(s*d-l*c),t[1]=-(n*(c*M-d*p)-h*(a*M-i*p)+v*(a*d-i*c)),t[2]=n*(s*M-l*p)-o*(a*M-i*p)+v*(a*l-i*s),t[3]=-(n*(s*d-l*c)-o*(a*d-i*c)+h*(a*l-i*s)),t[4]=-(u*(c*M-d*p)-f*(s*M-l*p)+_*(s*d-l*c)),t[5]=r*(c*M-d*p)-f*(a*M-i*p)+_*(a*d-i*c),t[6]=-(r*(s*M-l*p)-u*(a*M-i*p)+_*(a*l-i*s)),t[7]=r*(s*d-l*c)-u*(a*d-i*c)+f*(a*l-i*s),t[8]=u*(h*M-d*v)-f*(o*M-l*v)+_*(o*d-l*h),t[9]=-(r*(h*M-d*v)-f*(n*M-i*v)+_*(n*d-i*h)),t[10]=r*(o*M-l*v)-u*(n*M-i*v)+_*(n*l-i*o),t[11]=-(r*(o*d-l*h)-u*(n*d-i*h)+f*(n*l-i*o)),t[12]=-(u*(h*p-c*v)-f*(o*p-s*v)+_*(o*c-s*h)),t[13]=r*(h*p-c*v)-f*(n*p-a*v)+_*(n*c-a*h),t[14]=-(r*(o*p-s*v)-u*(n*p-a*v)+_*(n*s-a*o)),t[15]=r*(o*c-s*h)-u*(n*c-a*h)+f*(n*s-a*o),t},a.SIMD.adjoint=function(t,e){var r,n,a,i,u,o,s,l,f,h,c,d,_,r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12);return f=SIMD.Float32x4.shuffle(r,n,0,1,4,5),o=SIMD.Float32x4.shuffle(a,i,0,1,4,5),u=SIMD.Float32x4.shuffle(f,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,f,1,3,5,7),f=SIMD.Float32x4.shuffle(r,n,2,3,6,7),l=SIMD.Float32x4.shuffle(a,i,2,3,6,7),s=SIMD.Float32x4.shuffle(f,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,f,1,3,5,7),f=SIMD.Float32x4.mul(s,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.mul(o,f),c=SIMD.Float32x4.mul(u,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,f),h),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.mul(o,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),h),_=SIMD.Float32x4.mul(u,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,f)),_=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),_),_=SIMD.Float32x4.swizzle(_,2,3,0,1),f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,3,0,1),l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),h),d=SIMD.Float32x4.mul(u,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,f)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),f=SIMD.Float32x4.mul(u,o),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),d),_=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),_),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),d),_=SIMD.Float32x4.sub(_,SIMD.Float32x4.mul(s,f)),f=SIMD.Float32x4.mul(u,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,f)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,f),d),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),c),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(o,f)),f=SIMD.Float32x4.mul(u,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),c),_=SIMD.Float32x4.sub(_,SIMD.Float32x4.mul(o,f)),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,f)),_=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,f),_),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,c),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,_),t},a.adjoint=n.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],l=t[8],f=t[9],h=t[10],c=t[11],d=t[12],_=t[13],v=t[14],p=t[15],M=e*u-r*i,m=e*o-n*i,x=e*s-a*i,E=r*o-n*u,T=r*s-a*u,g=n*s-a*o,b=l*_-f*d,S=l*v-h*d,I=l*p-c*d,y=f*v-h*_,F=f*p-c*_,R=h*p-c*v;return M*R-m*F+x*y+E*I-T*S+g*b},a.SIMD.multiply=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),u=SIMD.Float32x4.load(e,12),o=SIMD.Float32x4.load(r,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,3,3,3,3),u))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(r,4),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),u))));SIMD.Float32x4.store(t,4,f);var h=SIMD.Float32x4.load(r,8),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),u))));SIMD.Float32x4.store(t,8,c);var d=SIMD.Float32x4.load(r,12),_=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),u))));return SIMD.Float32x4.store(t,12,_),t},a.scalar.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=e[9],d=e[10],_=e[11],v=e[12],p=e[13],M=e[14],m=e[15],x=r[0],E=r[1],T=r[2],g=r[3];return t[0]=x*n+E*o+T*h+g*v,t[1]=x*a+E*s+T*c+g*p,t[2]=x*i+E*l+T*d+g*M,t[3]=x*u+E*f+T*_+g*m,x=r[4],E=r[5],T=r[6],g=r[7],t[4]=x*n+E*o+T*h+g*v,t[5]=x*a+E*s+T*c+g*p,t[6]=x*i+E*l+T*d+g*M,t[7]=x*u+E*f+T*_+g*m,x=r[8],E=r[9],T=r[10],g=r[11],t[8]=x*n+E*o+T*h+g*v,t[9]=x*a+E*s+T*c+g*p,t[10]=x*i+E*l+T*d+g*M,t[11]=x*u+E*f+T*_+g*m,x=r[12],E=r[13],T=r[14],g=r[15],t[12]=x*n+E*o+T*h+g*v,t[13]=x*a+E*s+T*c+g*p,t[14]=x*i+E*l+T*d+g*M,t[15]=x*u+E*f+T*_+g*m,t},a.multiply=n.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,r){var n,a,i,u,o,s,l,f,h,c,d,_,v=r[0],p=r[1],M=r[2];return e===t?(t[12]=e[0]*v+e[4]*p+e[8]*M+e[12],t[13]=e[1]*v+e[5]*p+e[9]*M+e[13],t[14]=e[2]*v+e[6]*p+e[10]*M+e[14],t[15]=e[3]*v+e[7]*p+e[11]*M+e[15]):(n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=e[9],d=e[10],_=e[11],t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=l,t[7]=f,t[8]=h,t[9]=c,t[10]=d,t[11]=_,t[12]=n*v+o*p+h*M+e[12],t[13]=a*v+s*p+c*M+e[13],t[14]=i*v+l*p+d*M+e[14],t[15]=u*v+f*p+_*M+e[15]),t},a.SIMD.translate=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),u=SIMD.Float32x4.load(e,12),o=SIMD.Float32x4(r[0],r[1],r[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(o,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(o,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,2,2,2,2));var s=SIMD.Float32x4.add(n,SIMD.Float32x4.add(a,SIMD.Float32x4.add(i,u)));return SIMD.Float32x4.store(t,12,s),t},a.translate=n.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,r){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,r){var n,a,i,u=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1))),i=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(u,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=n.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,r,a){var i,u,o,s,l,f,h,c,d,_,v,p,M,m,x,E,T,g,b,S,I,y,F,R,A=a[0],D=a[1],w=a[2],P=Math.sqrt(A*A+D*D+w*w);return Math.abs(P)<n.EPSILON?null:(P=1/P,A*=P,D*=P,w*=P,i=Math.sin(r),u=Math.cos(r),o=1-u,s=e[0],l=e[1],f=e[2],h=e[3],c=e[4],d=e[5],_=e[6],v=e[7],p=e[8],M=e[9],m=e[10],x=e[11],E=A*A*o+u,T=D*A*o+w*i,g=w*A*o-D*i,b=A*D*o-w*i,S=D*D*o+u,I=w*D*o+A*i,y=A*w*o+D*i,F=D*w*o-A*i,R=w*w*o+u,t[0]=s*E+c*T+p*g,t[1]=l*E+d*T+M*g,t[2]=f*E+_*T+m*g,t[3]=h*E+v*T+x*g,t[4]=s*b+c*S+p*I,t[5]=l*b+d*S+M*I,t[6]=f*b+_*S+m*I,t[7]=h*b+v*S+x*I,t[8]=s*y+c*F+p*R,t[9]=l*y+d*F+M*R,t[10]=f*y+_*F+m*R,t[11]=h*y+v*F+x*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[4],u=e[5],o=e[6],s=e[7],l=e[8],f=e[9],h=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+l*n,t[5]=u*a+f*n,t[6]=o*a+h*n,t[7]=s*a+c*n,t[8]=l*a-i*n,t[9]=f*a-u*n,t[10]=h*a-o*n,t[11]=c*a-s*n,t},a.SIMD.rotateX=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,4),u=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,a),SIMD.Float32x4.mul(i,n))),t},a.rotateX=n.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],u=e[1],o=e[2],s=e[3],l=e[8],f=e[9],h=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-l*n,t[1]=u*a-f*n,t[2]=o*a-h*n,t[3]=s*a-c*n,t[8]=i*n+l*a,t[9]=u*n+f*a,t[10]=o*n+h*a,t[11]=s*n+c*a,t},a.SIMD.rotateY=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),u=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(u,a))),t},a.rotateY=n.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],u=e[1],o=e[2],s=e[3],l=e[4],f=e[5],h=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+l*n,t[1]=u*a+f*n,t[2]=o*a+h*n,t[3]=s*a+c*n,t[4]=l*a-i*n,t[5]=f*a-u*n,t[6]=h*a-o*n,t[7]=c*a-s*n,t},a.SIMD.rotateZ=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),u=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,a),SIMD.Float32x4.mul(i,n))),t},a.rotateZ=n.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,r){var a,i,u,o=r[0],s=r[1],l=r[2],f=Math.sqrt(o*o+s*s+l*l);return Math.abs(f)<n.EPSILON?null:(f=1/f,o*=f,s*=f,l*=f,a=Math.sin(e),i=Math.cos(e),u=1-i,t[0]=o*o*u+i,t[1]=s*o*u+l*a,t[2]=l*o*u-s*a,t[3]=0,t[4]=o*s*u-l*a,t[5]=s*s*u+i,t[6]=l*s*u+o*a,t[7]=0,t[8]=o*l*u+s*a,t[9]=s*l*u-o*a,t[10]=l*l*u+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=n+n,s=a+a,l=i+i,f=n*o,h=n*s,c=n*l,d=a*s,_=a*l,v=i*l,p=u*o,M=u*s,m=u*l;return t[0]=1-(d+v),t[1]=h+m,t[2]=c-M,t[3]=0,t[4]=h-m,t[5]=1-(f+v),t[6]=_+p,t[7]=0,t[8]=c+M,t[9]=_-p,t[10]=1-(f+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},a.fromRotationTranslationScale=function(t,e,r,n){var a=e[0],i=e[1],u=e[2],o=e[3],s=a+a,l=i+i,f=u+u,h=a*s,c=a*l,d=a*f,_=i*l,v=i*f,p=u*f,M=o*s,m=o*l,x=o*f,E=n[0],T=n[1],g=n[2];return t[0]=(1-(_+p))*E,t[1]=(c+x)*E,t[2]=(d-m)*E,t[3]=0,t[4]=(c-x)*T,t[5]=(1-(h+p))*T,t[6]=(v+M)*T,t[7]=0,t[8]=(d+m)*g,t[9]=(v-M)*g,t[10]=(1-(h+_))*g,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){var i=e[0],u=e[1],o=e[2],s=e[3],l=i+i,f=u+u,h=o+o,c=i*l,d=i*f,_=i*h,v=u*f,p=u*h,M=o*h,m=s*l,x=s*f,E=s*h,T=n[0],g=n[1],b=n[2],S=a[0],I=a[1],y=a[2];return t[0]=(1-(v+M))*T,t[1]=(d+E)*T,t[2]=(_-x)*T,t[3]=0,t[4]=(d-E)*g,t[5]=(1-(c+M))*g,t[6]=(p+m)*g,t[7]=0,t[8]=(_+x)*b,t[9]=(p-m)*b,t[10]=(1-(c+v))*b,t[11]=0,t[12]=r[0]+S-(t[0]*S+t[4]*I+t[8]*y),t[13]=r[1]+I-(t[1]*S+t[5]*I+t[9]*y),t[14]=r[2]+y-(t[2]*S+t[6]*I+t[10]*y),t[15]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r+r,o=n+n,s=a+a,l=r*u,f=n*u,h=n*o,c=a*u,d=a*o,_=a*s,v=i*u,p=i*o,M=i*s;return t[0]=1-h-_,t[1]=f+M,t[2]=c-p,t[3]=0,t[4]=f-M,t[5]=1-l-_,t[6]=d+v,t[7]=0,t[8]=c+p,t[9]=d-v,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,r,n,a,i,u){var o=1/(r-e),s=1/(a-n),l=1/(i-u);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(a+n)*s,t[10]=(u+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*l,t[15]=0,t},a.perspective=function(t,e,r,n,a){var i=1/Math.tan(e/2),u=1/(n-a);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*u,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),s=2/(u+o),l=2/(a+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((u-o)*s*.5),t[9]=(a-i)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},a.ortho=function(t,e,r,n,a,i,u){var o=1/(e-r),s=1/(n-a),l=1/(i-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*o,t[13]=(a+n)*s,t[14]=(u+i)*l,t[15]=1,t},a.lookAt=function(t,e,r,i){var u,o,s,l,f,h,c,d,_,v,p=e[0],M=e[1],m=e[2],x=i[0],E=i[1],T=i[2],g=r[0],b=r[1],S=r[2];return Math.abs(p-g)<n.EPSILON&&Math.abs(M-b)<n.EPSILON&&Math.abs(m-S)<n.EPSILON?a.identity(t):(c=p-g,d=M-b,_=m-S,v=1/Math.sqrt(c*c+d*d+_*_),c*=v,d*=v,_*=v,u=E*_-T*d,o=T*c-x*_,s=x*d-E*c,v=Math.sqrt(u*u+o*o+s*s),v?(v=1/v,u*=v,o*=v,s*=v):(u=0,o=0,s=0),l=d*s-_*o,f=_*u-c*s,h=c*o-d*u,v=Math.sqrt(l*l+f*f+h*h),v?(v=1/v,l*=v,f*=v,h*=v):(l=0,f=0,h=0),t[0]=u,t[1]=l,t[2]=c,t[3]=0,t[4]=o,t[5]=f,t[6]=d,t[7]=0,t[8]=s,t[9]=h,t[10]=_,t[11]=0,t[12]=-(u*p+o*M+s*m),t[13]=-(l*p+f*M+h*m),t[14]=-(c*p+d*M+_*m),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],
t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],l=t[6],f=t[7],h=t[8],c=t[9],d=t[10],_=t[11],v=t[12],p=t[13],M=t[14],m=t[15],x=e[0],E=e[1],T=e[2],g=e[3],b=e[4],S=e[5],I=e[6],y=e[7],F=e[8],R=e[9],A=e[10],D=e[11],w=e[12],P=e[13],O=e[14],N=e[15];return Math.abs(r-x)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-E)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-T)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(u-g)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(o-b)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-S)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-I)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(f-y)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(h-F)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(c-R)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(d-A)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(_-D)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(v-w)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(p-P)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(M-O)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(m-N)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))},t.exports=a},function(t,e,r){var n=r(11),a=r(72),i=r(73),u=r(74),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.rotationTo=function(){var t=i.create(),e=i.fromValues(1,0,0),r=i.fromValues(0,1,0);return function(n,a,u){var s=i.dot(a,u);return-.999999>s?(i.cross(t,e,a),i.length(t)<1e-6&&i.cross(t,r,a),i.normalize(t,t),o.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(i.cross(t,a,u),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,o.normalize(n,n))}}(),o.setAxes=function(){var t=a.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],o.normalize(e,o.fromMat3(e,t))}}(),o.clone=u.clone,o.fromValues=u.fromValues,o.copy=u.copy,o.set=u.set,o.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.setAxisAngle=function(t,e,r){r=.5*r;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},o.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},o.add=u.add,o.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=r[0],s=r[1],l=r[2],f=r[3];return t[0]=n*f+u*o+a*l-i*s,t[1]=a*f+u*s+i*o-n*l,t[2]=i*f+u*l+n*s-a*o,t[3]=u*f-n*o-a*s-i*l,t},o.mul=o.multiply,o.scale=u.scale,o.rotateX=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s+u*o,t[1]=a*s+i*o,t[2]=i*s-a*o,t[3]=u*s-n*o,t},o.rotateY=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s-i*o,t[1]=a*s+u*o,t[2]=i*s+n*o,t[3]=u*s-a*o,t},o.rotateZ=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s+a*o,t[1]=a*s-n*o,t[2]=i*s+u*o,t[3]=u*s-i*o,t},o.calculateW=function(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t},o.dot=u.dot,o.lerp=u.lerp,o.slerp=function(t,e,r,n){var a,i,u,o,s,l=e[0],f=e[1],h=e[2],c=e[3],d=r[0],_=r[1],v=r[2],p=r[3];return i=l*d+f*_+h*v+c*p,0>i&&(i=-i,d=-d,_=-_,v=-v,p=-p),1-i>1e-6?(a=Math.acos(i),u=Math.sin(a),o=Math.sin((1-n)*a)/u,s=Math.sin(n*a)/u):(o=1-n,s=n),t[0]=o*l+s*d,t[1]=o*f+s*_,t[2]=o*h+s*v,t[3]=o*c+s*p,t},o.sqlerp=function(){var t=o.create(),e=o.create();return function(r,n,a,i,u,s){return o.slerp(t,n,u,s),o.slerp(e,a,i,s),o.slerp(r,t,e,2*s*(1-s)),r}}(),o.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r*r+n*n+a*a+i*i,o=u?1/u:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-a*o,t[3]=i*o,t},o.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},o.length=u.length,o.len=o.length,o.squaredLength=u.squaredLength,o.sqrLen=o.squaredLength,o.normalize=u.normalize,o.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,u=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*u+u]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*i+u]-e[3*u+i])*r,t[i]=(e[3*i+a]+e[3*a+i])*r,t[u]=(e[3*u+a]+e[3*a+u])*r}return t},o.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=u.exactEquals,o.equals=u.equals,t.exports=o},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,r){return t[0]=e,t[1]=r,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},a.lerp=function(t,e,r,n){var a=e[0],i=e[1];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},a.transformMat2=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t},a.transformMat2d=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,u){var o,s;for(r||(r=2),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,o=n;s>o;o+=r)t[0]=e[o],t[1]=e[o+1],i(t,t,u),e[o]=t[0],e[o+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var r=t[0],a=t[1],i=e[0],u=e[1];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},t.exports=a},function(t,e){t.exports=function(){throw new Error("It appears that you're using glslify in browserify without its transform applied. Make sure that you've set up glslify as a source transform: https://github.com/substack/node-browserify#browserifytransform")}},function(t,e){function r(t){var e=new Int32Array(t,0,p);if(e[M]!==i)throw new Error("Invalid magic number in DDS header");if(!e[b]&o)throw new Error("Unsupported format, must contain a FourCC code");var r,n,y=e[S];switch(y){case s:r=8,n="dxt1";break;case l:r=16,n="dxt3";break;case f:r=16,n="dxt5";break;case c:n="rgba32f";break;case h:var F=new Uint32Array(t.slice(128,148));n=F[0];var R=F[1];F[2],F[3],F[4];if(R!==_||n!==v)throw new Error("Unsupported DX10 texture format "+n);n="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+a(y))}var A=e[x],D=1;A&u&&(D=Math.max(1,e[g]));var w=!1,P=e[I];P&d&&(w=!0);var O,N=e[T],L=e[E],k=e[m]+4,U=N,C=L,B=[];if(y===h&&(k+=20),w)for(var X=0;6>X;X++){if("rgba32f"!==n)throw new Error("Only RGBA32f cubemaps are supported");var V=16;N=U,L=C;for(var z=Math.log(N)/Math.log(2)+1,j=0;z>j;j++)O=N*L*V,B.push({offset:k,length:O,shape:[N,L]}),D>j&&(k+=O),N=Math.floor(N/2),L=Math.floor(L/2)}else for(var j=0;D>j;j++)O=Math.max(4,N)/4*Math.max(4,L)/4*r,B.push({offset:k,length:O,shape:[N,L]}),k+=O,N=Math.floor(N/2),L=Math.floor(L/2);return{shape:[U,C],images:B,format:n,flags:A,cubemap:w}}function n(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function a(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}var i=542327876,u=131072,o=4,s=n("DXT1"),l=n("DXT3"),f=n("DXT5"),h=n("DX10"),c=116,d=512,_=3,v=2,p=31,M=0,m=1,x=2,E=3,T=4,g=7,b=20,S=21,I=28;t.exports=r},function(t,e){t.exports="// axis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n	// vec3 color = vNormal;\n	vec3 color = vColor + vNormal * 0.0001;\n    gl_FragColor = vec4(color, 1.0);\n}"},function(t,e){t.exports="// axis.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vColor = aColor;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}"},function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME DOTS_PLANE_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition + aNormal * 0.000001, 1.0);\n    gl_PointSize = 1.0;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// fxaa.frag\n\n#define SHADER_NAME FXAA\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uResolution;\n\n\nfloat FXAA_SUBPIX_SHIFT = 1.0/4.0;\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\n\n\nvec4 applyFXAA(sampler2D tex) {\n    vec4 color;\n    vec2 fragCoord = gl_FragCoord.xy;\n    vec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * uResolution).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * uResolution;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * uResolution + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * uResolution + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n\nvoid main(void) {\n 	vec4 color = applyFXAA(texture);\n 	gl_FragColor = color;\n}"},function(t,e){t.exports="// sky.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n	mat4 matView = uViewMatrix;\n	matView[3][0] = 0.0;\n	matView[3][1] = 0.0;\n	matView[3][2] = 0.0;\n	\n    gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"}])});
//# sourceMappingURL=alfrid.js.map